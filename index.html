<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solana Alpha Scanner - Cyberpunk Edition</title>
    <!-- Solana Wallet Adapter CDN -->
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Solana Cyberpunk Color Palette */
            --bg-void: #0a0a0a;
            --bg-dark: #121212;
            --bg-card: #1a1a1a;
            --solana-green: #14F195;
            --solana-purple: #9945FF;
            --neon-red: #ff4d4d;
            --amber: #fbbf24;
            --text-primary: #ffffff;
            --text-secondary: #a0a0a0;
            --text-muted: #666666;
            --border-subtle: rgba(255, 255, 255, 0.1);
            --glow-green: rgba(20, 241, 149, 0.3);
            --glow-purple: rgba(153, 69, 255, 0.3);
            --glow-red: rgba(255, 77, 77, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-void);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Animated Background Mesh */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(20, 241, 149, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(153, 69, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(20, 241, 149, 0.05) 0%, transparent 50%);
            z-index: -1;
            animation: meshFloat 20s ease-in-out infinite;
        }

        @keyframes meshFloat {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(30px, -30px) rotate(1deg); }
            66% { transform: translate(-20px, 20px) rotate(-1deg); }
        }

        /* Header - The Control Center */
        .header {
            padding: 2rem 2rem 1rem;
            border-bottom: 1px solid var(--border-subtle);
            backdrop-filter: blur(20px);
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(10, 10, 10, 0.8);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--solana-green), var(--solana-purple));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 var(--glow-green); }
            50% { box-shadow: 0 0 0 10px transparent; }
        }

        .logo-text {
            font-family: 'Inter', sans-serif;
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--solana-green), var(--solana-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .network-status {
            display: flex;
            gap: 2rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--solana-green);
            animation: blink 2s ease-in-out infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }

        .connect-wallet {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, var(--solana-green), var(--solana-purple));
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .connect-wallet::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .connect-wallet:hover::before {
            left: 100%;
        }

        .connect-wallet:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px var(--glow-green);
        }

        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Hero Ticker */
        .hero-ticker {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 2rem;
            backdrop-filter: blur(10px);
            overflow: hidden;
            position: relative;
        }

        .ticker-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .ticker-content {
            display: flex;
            gap: 2rem;
            animation: scroll 30s linear infinite;
        }

        @keyframes scroll {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        .ticker-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            white-space: nowrap;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875rem;
        }

        .ticker-score {
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-weight: 600;
        }

        .ticker-score.high { background: var(--solana-green); color: black; }
        .ticker-score.medium { background: var(--amber); color: black; }
        .ticker-score.low { background: var(--neon-red); color: white; }

        /* Stats Dashboard */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--solana-green), var(--solana-purple));
        }

        .stat-card:hover {
            transform: translateY(-4px);
            border-color: var(--solana-green);
            box-shadow: 0 20px 40px rgba(20, 241, 149, 0.1);
        }

        /* Buy Signals Âç°ÁâáÁâπÊÆäÊ†∑Âºè */
        .stat-card.clickable {
            position: relative;
        }

        .stat-card.clickable::after {
            content: 'üëÜ ÁÇπÂáªÊü•ÁúãÊìç‰Ωú';
            position: absolute;
            bottom: 0.5rem;
            right: 0.5rem;
            font-size: 0.625rem;
            color: var(--text-muted);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .stat-card.clickable:hover::after {
            opacity: 1;
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .stat-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .stat-icon {
            width: 32px;
            height: 32px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
            font-family: 'JetBrains Mono', monospace;
            background: linear-gradient(135deg, var(--solana-green), var(--solana-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-change {
            font-size: 0.875rem;
            color: var(--solana-green);
            font-weight: 500;
        }

        /* Controls */
        .controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .controls-section {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .controls-row {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .controls-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-weight: 600;
            min-width: 80px;
        }

        /* Filter Buttons */
        .filter-group {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid var(--border-subtle);
            background: var(--bg-card);
            color: var(--text-secondary);
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .filter-btn:hover {
            border-color: var(--solana-green);
            color: var(--text-primary);
        }

        .filter-btn.active {
            border-color: var(--solana-green);
            background: var(--solana-green);
            color: black;
            box-shadow: 0 0 15px var(--glow-green);
        }

        .filter-btn.buy.active {
            border-color: var(--solana-green);
            background: var(--solana-green);
            color: black;
        }

        .filter-btn.hold.active {
            border-color: var(--amber);
            background: var(--amber);
            color: black;
        }

        .filter-btn.avoid.active {
            border-color: var(--neon-red);
            background: var(--neon-red);
            color: white;
        }

        /* Sort Dropdown */
        .sort-select {
            padding: 0.5rem 1rem;
            border-radius: 8px;
            border: 1px solid var(--border-subtle);
            background: var(--bg-card);
            color: var(--text-primary);
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .sort-select:hover {
            border-color: var(--solana-green);
        }

        .sort-select:focus {
            outline: none;
            border-color: var(--solana-green);
            box-shadow: 0 0 0 2px var(--glow-green);
        }

        /* Clear Filters Button */
        .clear-filters {
            padding: 0.5rem 1rem;
            border-radius: 8px;
            border: 1px solid var(--border-subtle);
            background: transparent;
            color: var(--text-secondary);
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .clear-filters:hover {
            border-color: var(--neon-red);
            color: var(--neon-red);
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--solana-green), var(--solana-purple));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px var(--glow-green);
        }

        .btn-secondary {
            background: var(--bg-card);
            color: var(--text-primary);
            border: 1px solid var(--border-subtle);
        }

        .btn-secondary:hover {
            border-color: var(--solana-green);
            background: rgba(20, 241, 149, 0.1);
        }

        /* Token Scanner List */
        .scanner-section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            backdrop-filter: blur(10px);
            overflow: hidden;
        }

        .scanner-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .scanner-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .scanner-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--solana-green);
            animation: pulse-dot 2s ease-in-out infinite;
        }

        @keyframes pulse-dot {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
        }

        /* Token List */
        .token-list {
            max-height: 600px;
            overflow-y: auto;
        }

        .token-item {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-subtle);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .token-item:hover {
            background: rgba(20, 241, 149, 0.05);
            border-left: 3px solid var(--solana-green);
            transform: translateX(4px);
            box-shadow: 0 8px 32px rgba(20, 241, 149, 0.1);
        }

        .token-item:active {
            transform: translateX(2px) scale(0.98);
        }

        .token-item::after {
            content: 'üìä Click to view chart';
            position: absolute;
            bottom: 1rem;
            right: 1rem;
            font-size: 0.75rem;
            color: var(--text-muted);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .token-item:hover::after {
            opacity: 1;
        }

        .token-item:last-child {
            border-bottom: none;
        }

        /* ÂÖ≥Ê≥®ÊåâÈíÆÊ†∑Âºè */
        .watch-float-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 44px;
            height: 44px;
            padding: 0;
            border: 2px solid var(--border-subtle);
            border-radius: 50%;
            font-size: 1.35rem;
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 20;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(26, 26, 26, 0.95);
            backdrop-filter: blur(4px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }
        
        .watch-float-btn:hover {
            transform: scale(1.15);
            border-color: var(--solana-purple);
            box-shadow: 0 0 20px var(--glow-purple);
            background: rgba(153, 69, 255, 0.2);
        }
        
        .watch-float-btn:active {
            transform: scale(0.95);
        }
        
        .watch-float-btn[data-watched="true"] {
            background: var(--solana-purple);
            border-color: var(--solana-purple);
            box-shadow: 0 0 12px var(--glow-purple);
        }
        
        .watch-float-btn[data-watched="true"]:hover {
            background: var(--neon-red);
            border-color: var(--neon-red);
            box-shadow: 0 0 20px var(--glow-red);
        }

        .token-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .token-info {
            flex: 1;
        }

        .token-name-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .token-symbol {
            font-family: 'Inter', sans-serif;
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--text-primary);
            background: linear-gradient(135deg, var(--solana-green), var(--solana-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.02em;
        }

        .token-address {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--text-muted);
            opacity: 0.8;
            word-break: break-all;
            line-height: 1.2;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }

        .token-address:hover {
            opacity: 1;
            color: var(--text-secondary);
        }

        .token-address:hover::after {
            content: attr(title);
            position: absolute;
            bottom: 100%;
            left: 0;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 6px;
            padding: 0.5rem;
            font-size: 0.75rem;
            white-space: nowrap;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .token-age {
            font-size: 0.75rem;
            color: var(--text-muted);
            font-weight: 500;
            background: var(--bg-secondary);
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            border: 1px solid var(--border-subtle);
        }

        /* Alpha Score Ring */
        .alpha-score {
            position: relative;
            width: 80px;
            height: 80px;
        }

        .score-ring {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: conic-gradient(
                var(--solana-green) 0deg,
                var(--solana-green) calc(var(--score) * 3.6deg),
                var(--border-subtle) calc(var(--score) * 3.6deg),
                var(--border-subtle) 360deg
            );
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .score-ring::before {
            content: '';
            width: 60px;
            height: 60px;
            background: var(--bg-card);
            border-radius: 50%;
            position: absolute;
        }

        .score-number {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            font-size: 1rem;
            z-index: 1;
            color: var(--text-primary);
        }

        /* Token Details */
        .token-details {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 1rem;
            align-items: center;
        }

        .token-metrics {
            display: flex;
            gap: 2rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875rem;
        }

        .metric {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .metric-label {
            color: var(--text-muted);
            font-size: 0.75rem;
        }

        .metric-value {
            color: var(--text-primary);
            font-weight: 600;
        }

        /* Recommendation Badge */
        .recommendation-badge {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .rec-buy {
            background: var(--solana-green);
            color: black;
            box-shadow: 0 0 20px var(--glow-green);
        }

        .rec-hold {
            background: var(--amber);
            color: black;
        }

        .rec-avoid {
            background: var(--neon-red);
            color: white;
            box-shadow: 0 0 20px var(--glow-red);
        }

        /* Signals */
        .signals {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .signal-tag {
            padding: 0.25rem 0.75rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        /* Loading Animation */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 10, 10, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .loading-content {
            text-align: center;
        }

        .scanner-animation {
            width: 100px;
            height: 100px;
            border: 2px solid var(--border-subtle);
            border-top: 2px solid var(--solana-green);
            border-radius: 50%;
            animation: scan 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes scan {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                align-items: stretch;
            }

            .network-status {
                justify-content: center;
            }

            .container {
                padding: 1rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .token-details {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }

            .token-metrics {
                gap: 1rem;
            }

            .controls {
                justify-content: center;
            }
        }

        /* Scrollbar Styling */
        .token-list::-webkit-scrollbar {
            width: 6px;
        }

        .token-list::-webkit-scrollbar-track {
            background: var(--bg-dark);
        }

        .token-list::-webkit-scrollbar-thumb {
            background: var(--solana-green);
            border-radius: 3px;
        }

        .token-list::-webkit-scrollbar-thumb:hover {
            background: var(--solana-purple);
        }
    </style>
</head>
<body>
    <!-- Header - The Control Center -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">‚ö°</div>
                <div class="logo-text">Solana Alpha Scanner</div>
            </div>
            
            <div class="network-status">
                <div class="status-item">
                    <div class="status-dot"></div>
                    <span>TPS: <span id="tps">2,847</span></span>
                </div>
                <div class="status-item">
                    <div class="status-dot"></div>
                    <span>Block: <span id="blockHeight">245,892,103</span></span>
                </div>
                <div class="status-item">
                    <div class="status-dot"></div>
                    <span>Latency: <span id="latency">89ms</span></span>
                </div>
            </div>
            
            <button class="btn-portfolio" onclick="showPortfolioPage()" style="
                padding: 0.75rem 1.5rem;
                background: var(--bg-card);
                border: 1px solid var(--border-subtle);
                border-radius: 8px;
                color: var(--text-primary);
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                gap: 0.5rem;
            " onmouseover="this.style.borderColor='var(--solana-purple)'; this.style.background='rgba(153, 69, 255, 0.1)'"
               onmouseout="this.style.borderColor='var(--border-subtle)'; this.style.background='var(--bg-card)'">
                <span>üìä</span> ÊäïËµÑÁªÑÂêà
                <span id="watchlistCount" style="
                    background: var(--solana-purple);
                    color: white;
                    padding: 0.125rem 0.5rem;
                    border-radius: 10px;
                    font-size: 0.75rem;
                    min-width: 20px;
                    text-align: center;
                ">0</span>
            </button>
            
            <button class="connect-wallet" onclick="connectWallet()">
                üîó Connect Wallet
            </button>
        </div>
    </header>

    <div class="container">
        <!-- Hero Ticker -->
        <div class="hero-ticker">
            <div class="ticker-label">üî• Latest Alpha Discoveries</div>
            <div class="ticker-content" id="tickerContent">
                <div class="ticker-item">
                    <span class="ticker-score high">95</span>
                    <span style="font-weight: 600; color: var(--text-primary);">BONK</span>
                    <span>‚Ä¢</span>
                    <span>üîí Mint Renounced</span>
                    <span>‚Ä¢</span>
                    <span style="font-size: 0.75rem; color: var(--text-muted);">2m ago</span>
                </div>
                <div class="ticker-item">
                    <span class="ticker-score medium">72</span>
                    <span style="font-weight: 600; color: var(--text-primary);">JUP</span>
                    <span>‚Ä¢</span>
                    <span>üë• Fair Distribution</span>
                    <span>‚Ä¢</span>
                    <span style="font-size: 0.75rem; color: var(--text-muted);">5m ago</span>
                </div>
                <div class="ticker-item">
                    <span class="ticker-score low">34</span>
                    <span style="font-weight: 600; color: var(--text-primary);">WSOL</span>
                    <span>‚Ä¢</span>
                    <span>üêã Whale Concentrated</span>
                    <span>‚Ä¢</span>
                    <span style="font-size: 0.75rem; color: var(--text-muted);">1m ago</span>
                </div>
            </div>
        </div>

        <!-- Stats Dashboard -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-label">Tokens Scanned</div>
                    <div class="stat-icon" style="background: rgba(20, 241, 149, 0.2);">üîç</div>
                </div>
                <div class="stat-number" id="scannedCount">1,247</div>
                <div class="stat-change">+23 in last hour</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-label">Alpha Signals</div>
                    <div class="stat-icon" style="background: rgba(153, 69, 255, 0.2);">‚ö°</div>
                </div>
                <div class="stat-number" id="alphaCount">89</div>
                <div class="stat-change">+7 high-confidence</div>
            </div>
            
            <div class="stat-card clickable" onclick="showBuySignalsActions()" style="cursor: pointer; transition: all 0.3s ease;">
                <div class="stat-header">
                    <div class="stat-label">Buy Signals</div>
                    <div class="stat-icon" style="background: rgba(20, 241, 149, 0.2);">üéØ</div>
                </div>
                <div class="stat-number" id="buyCount">12</div>
                <div class="stat-change">Score ‚â• 80</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-label">Avg Score</div>
                    <div class="stat-icon" style="background: rgba(251, 191, 36, 0.2);">üìä</div>
                </div>
                <div class="stat-number" id="avgScore">67</div>
                <div class="stat-change">Market quality</div>
            </div>
        </div>

        <!-- Controls -->
        <div class="controls-section">
            <!-- Mode Toggle -->
            <div class="controls-row">
                <div class="controls-label">Êâ´ÊèèÊ®°Âºè:</div>
                <div class="controls">
                    <button class="btn" id="modeToggle" onclick="toggleScanMode()" 
                            style="background: var(--bg-card); color: var(--text-primary); border: 1px solid var(--border-subtle);">
                        <span>üé≠</span> ÊºîÁ§∫Ê®°Âºè
                    </button>
                    <div style="font-size: 0.75rem; color: var(--text-secondary); margin-left: 1rem;">
                        <span id="modeDescription">‰ΩøÁî®Ê®°ÊãüÊï∞ÊçÆËøõË°åÂäüËÉΩÊºîÁ§∫</span>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="controls-row">
                <div class="controls-label">Actions:</div>
                <div class="controls">
                    <button class="btn btn-primary" onclick="startScanning()">
                        <span>üîç</span> Start Scanning
                    </button>
                    <button class="btn btn-secondary" onclick="stopScanning()">
                        <span>‚è∏Ô∏è</span> Pause
                    </button>
                    <button class="btn btn-secondary" onclick="clearResults()">
                        <span>üóëÔ∏è</span> Clear
                    </button>
                    <button class="btn btn-secondary" onclick="exportResults()">
                        <span>üìä</span> Export Report
                    </button>
                    <button class="btn btn-secondary" onclick="toggleAutoTrade()">
                        <span>ü§ñ</span> Auto Trade
                    </button>
                </div>
            </div>

            <!-- Filter Controls -->
            <div class="controls-row">
                <div class="controls-label">Filter:</div>
                <div class="filter-group">
                    <button class="filter-btn" data-filter="all" onclick="setFilter('all')">
                        <span>üìä</span> All Tokens
                    </button>
                    <button class="filter-btn buy" data-filter="BUY" onclick="setFilter('BUY')">
                        <span>üü¢</span> BUY
                    </button>
                    <button class="filter-btn hold" data-filter="HOLD" onclick="setFilter('HOLD')">
                        <span>üü°</span> HOLD
                    </button>
                    <button class="filter-btn avoid" data-filter="AVOID" onclick="setFilter('AVOID')">
                        <span>üî¥</span> AVOID
                    </button>
                    <button class="clear-filters" onclick="clearFilters()">
                        <span>‚úñÔ∏è</span> Clear
                    </button>
                </div>
            </div>

            <!-- Sort Controls -->
            <div class="controls-row">
                <div class="controls-label">Sort by:</div>
                <select class="sort-select" id="sortSelect" onchange="setSortOption()">
                    <option value="score-desc">üéØ Score (High to Low)</option>
                    <option value="score-asc">üéØ Score (Low to High)</option>
                    <option value="age-asc">‚è∞ Age (Newest First)</option>
                    <option value="age-desc">‚è∞ Age (Oldest First)</option>
                    <option value="liquidity-desc">üí∞ Liquidity (High to Low)</option>
                    <option value="liquidity-asc">üí∞ Liquidity (Low to High)</option>
                    <option value="marketcap-desc">üìà Market Cap (High to Low)</option>
                    <option value="marketcap-asc">üìà Market Cap (Low to High)</option>
                    <option value="holders-desc">üë• Holders (Most to Least)</option>
                    <option value="holders-asc">üë• Holders (Least to Most)</option>
                </select>
            </div>
        </div>

        <!-- Token Scanner List -->
        <div class="scanner-section">
            <div class="scanner-header">
                <div class="scanner-title">Live Alpha Scanner</div>
                <div class="scanner-status">
                    <div class="status-indicator"></div>
                    <span id="scannerStatus">Scanning...</span>
                </div>
            </div>
            
            <div class="token-list" id="tokenList">
                <!-- Tokens will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-content">
            <div class="scanner-animation"></div>
            <h3>Scanning Blockchain...</h3>
            <p>Analyzing new token contracts</p>
        </div>
    </div>

    <script>
        let isScanning = false;
        let scanInterval;
        let tokens = [];
        let filteredTokens = [];
        let autoTradeEnabled = false;
        let currentFilter = 'all';
        let currentSort = 'score-desc';
        
        // ÂÖ≥Ê≥®ÂàóË°®/Ëá™ÈÄâÂàóË°®
        let watchlist = JSON.parse(localStorage.getItem('solana_watchlist') || '[]');
        
        // ‰øùÂ≠òÂÖ≥Ê≥®ÂàóË°®Âà∞Êú¨Âú∞Â≠òÂÇ®
        function saveWatchlist() {
            localStorage.setItem('solana_watchlist', JSON.stringify(watchlist));
            updateWatchlistCount();
        }
        
        // Êõ¥Êñ∞ÂÖ≥Ê≥®ÂàóË°®ËÆ°Êï∞
        function updateWatchlistCount() {
            const countEl = document.getElementById('watchlistCount');
            if (countEl) {
                countEl.textContent = watchlist.length;
            }
        }
        
        // Ê£ÄÊü•tokenÊòØÂê¶Â∑≤ÂÖ≥Ê≥®
        function isInWatchlist(mint) {
            return watchlist.some(item => item.mint === mint);
        }
        
        // Ê∑ªÂä†Âà∞ÂÖ≥Ê≥®ÂàóË°®
        function addToWatchlist(token, event) {
            if (event) {
                event.stopPropagation(); // ÈòªÊ≠¢ÂÜíÊ≥°ÔºåÈÅøÂÖçËß¶ÂèëÂç°ÁâáÁÇπÂáª
            }
            
            if (isInWatchlist(token.mint)) {
                showNotification('ËØ•TokenÂ∑≤Âú®ÂÖ≥Ê≥®ÂàóË°®‰∏≠', 'info');
                return;
            }
            
            const watchItem = {
                mint: token.mint,
                symbol: token.symbol,
                score: token.score,
                recommendation: token.recommendation,
                liquidity: token.liquidity,
                marketCap: token.marketCap,
                holders: token.holders,
                signals: token.signals,
                launchTime: token.launchTime,
                addedTime: new Date().toISOString(),
                addedPrice: token.marketCapValue, // ËÆ∞ÂΩïÊ∑ªÂä†Êó∂ÁöÑÂ∏ÇÂÄº
                description: token.description,
                website: token.website,
                twitter: token.twitter,
                telegram: token.telegram
            };
            
            watchlist.push(watchItem);
            saveWatchlist();
            updateDisplay(); // Âà∑Êñ∞ÊòæÁ§∫‰ª•Êõ¥Êñ∞ÊåâÈíÆÁä∂ÊÄÅ
            showNotification(`‚úÖ ${token.symbol} Â∑≤Ê∑ªÂä†Âà∞ÂÖ≥Ê≥®ÂàóË°®`, 'success');
        }
        
        // ‰ªéÂÖ≥Ê≥®ÂàóË°®ÁßªÈô§
        function removeFromWatchlist(mint, event) {
            if (event) {
                event.stopPropagation();
            }
            
            const index = watchlist.findIndex(item => item.mint === mint);
            if (index > -1) {
                const removed = watchlist.splice(index, 1)[0];
                saveWatchlist();
                updateDisplay();
                showNotification(`üóëÔ∏è ${removed.symbol} Â∑≤‰ªéÂÖ≥Ê≥®ÂàóË°®ÁßªÈô§`, 'info');
            }
        }
        
        // ÊòæÁ§∫ÊäïËµÑÁªÑÂêàÈ°µÈù¢
        function showPortfolioPage() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(10, 10, 10, 0.95);
                display: flex;
                align-items: flex-start;
                justify-content: center;
                z-index: 2000;
                backdrop-filter: blur(10px);
                animation: fadeIn 0.3s ease;
                overflow-y: auto;
                padding: 2rem;
            `;

            // ËÆ°ÁÆóÁªüËÆ°Êï∞ÊçÆ
            const totalTokens = watchlist.length;
            const buySignals = watchlist.filter(t => t.recommendation === 'BUY').length;
            const holdSignals = watchlist.filter(t => t.recommendation === 'HOLD').length;
            const avgScore = totalTokens > 0 ? 
                Math.round(watchlist.reduce((sum, t) => sum + t.score, 0) / totalTokens) : 0;

            // ÁîüÊàêÂÖ≥Ê≥®ÂàóË°®HTML
            const watchlistHtml = watchlist.length > 0 ? watchlist.map(token => {
                const recClass = token.recommendation === 'BUY' ? 'var(--solana-green)' : 
                                token.recommendation === 'HOLD' ? 'var(--amber)' : 'var(--neon-red)';
                const recTextColor = token.recommendation === 'AVOID' ? 'white' : 'black';
                const addedTime = formatTime(token.addedTime);
                
                return `
                    <div style="
                        background: var(--bg-card);
                        border: 1px solid var(--border-subtle);
                        border-radius: 12px;
                        padding: 1.25rem;
                        transition: all 0.3s ease;
                        cursor: pointer;
                    " onmouseover="this.style.borderColor='var(--solana-green)'; this.style.transform='translateY(-2px)'"
                       onmouseout="this.style.borderColor='var(--border-subtle)'; this.style.transform='translateY(0)'"
                       onclick="viewWatchlistTokenDetail('${token.mint}')">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.75rem;">
                            <div>
                                <div style="font-size: 1.25rem; font-weight: 700; color: var(--text-primary); margin-bottom: 0.25rem;">
                                    ${token.symbol}
                                </div>
                                <div style="font-size: 0.75rem; color: var(--text-muted); font-family: 'JetBrains Mono', monospace;">
                                    ${token.mint.slice(0, 8)}...${token.mint.slice(-8)}
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <div style="
                                    background: conic-gradient(var(--solana-green) 0deg, var(--solana-green) calc(${token.score} * 3.6deg), var(--border-subtle) calc(${token.score} * 3.6deg), var(--border-subtle) 360deg);
                                    width: 50px;
                                    height: 50px;
                                    border-radius: 50%;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    position: relative;
                                ">
                                    <div style="
                                        width: 38px;
                                        height: 38px;
                                        background: var(--bg-card);
                                        border-radius: 50%;
                                        display: flex;
                                        align-items: center;
                                        justify-content: center;
                                        font-family: 'JetBrains Mono', monospace;
                                        font-weight: 700;
                                        font-size: 0.875rem;
                                        color: var(--text-primary);
                                    ">${token.score}</div>
                                </div>
                                <span style="
                                    padding: 0.25rem 0.75rem;
                                    background: ${recClass};
                                    color: ${recTextColor};
                                    border-radius: 12px;
                                    font-size: 0.75rem;
                                    font-weight: 600;
                                ">${token.recommendation}</span>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 1.5rem; margin-bottom: 0.75rem; font-size: 0.875rem;">
                            <div>
                                <div style="color: var(--text-muted); font-size: 0.75rem;">ÊµÅÂä®ÊÄß</div>
                                <div style="color: var(--text-primary); font-weight: 600;">${token.liquidity}</div>
                            </div>
                            <div>
                                <div style="color: var(--text-muted); font-size: 0.75rem;">Â∏ÇÂÄº</div>
                                <div style="color: var(--text-primary); font-weight: 600;">${token.marketCap}</div>
                            </div>
                            <div>
                                <div style="color: var(--text-muted); font-size: 0.75rem;">ÊåÅÊúâ‰∫∫</div>
                                <div style="color: var(--text-primary); font-weight: 600;">${token.holders}</div>
                            </div>
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="font-size: 0.75rem; color: var(--text-muted);">
                                üìå ÂÖ≥Ê≥®‰∫é ${addedTime}
                            </div>
                            <button onclick="removeFromWatchlist('${token.mint}', event)" style="
                                padding: 0.375rem 0.75rem;
                                background: transparent;
                                border: 1px solid var(--neon-red);
                                border-radius: 6px;
                                color: var(--neon-red);
                                font-size: 0.75rem;
                                cursor: pointer;
                                transition: all 0.3s ease;
                            " onmouseover="this.style.background='var(--neon-red)'; this.style.color='white'"
                               onmouseout="this.style.background='transparent'; this.style.color='var(--neon-red)'">
                                üóëÔ∏è ÂèñÊ∂àÂÖ≥Ê≥®
                            </button>
                        </div>
                    </div>
                `;
            }).join('') : `
                <div style="
                    grid-column: 1 / -1;
                    text-align: center;
                    padding: 3rem;
                    color: var(--text-secondary);
                ">
                    <div style="font-size: 4rem; margin-bottom: 1rem;">üì≠</div>
                    <h3 style="margin-bottom: 0.5rem;">ÂÖ≥Ê≥®ÂàóË°®‰∏∫Á©∫</h3>
                    <p style="font-size: 0.875rem;">Âú®Êâ´ÊèèÁªìÊûú‰∏≠ÁÇπÂáªTokenÂç°Áâá‰∏äÁöÑ ‚≠ê ÊåâÈíÆÊ∑ªÂä†ÂÖ≥Ê≥®</p>
                </div>
            `;

            modal.innerHTML = `
                <div style="
                    background: var(--bg-dark);
                    border: 1px solid var(--border-subtle);
                    border-radius: 16px;
                    max-width: 1000px;
                    width: 100%;
                    backdrop-filter: blur(20px);
                    animation: slideUp 0.3s ease;
                ">
                    <!-- È°µÈù¢Â§¥ÈÉ® -->
                    <div style="
                        padding: 1.5rem 2rem;
                        border-bottom: 1px solid var(--border-subtle);
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                    ">
                        <div>
                            <h2 style="color: var(--text-primary); margin-bottom: 0.25rem; font-size: 1.5rem;">
                                üìä ÊäïËµÑÁªÑÂêàÁÆ°ÁêÜ
                            </h2>
                            <p style="color: var(--text-secondary); font-size: 0.875rem;">
                                ËøΩË∏™ÂíåÁÆ°ÁêÜÊÇ®ÂÖ≥Ê≥®ÁöÑToken
                            </p>
                        </div>
                        <button onclick="closeModal()" style="
                            background: transparent;
                            border: none;
                            color: var(--text-secondary);
                            font-size: 1.5rem;
                            cursor: pointer;
                            padding: 0.5rem;
                            transition: color 0.3s ease;
                        " onmouseover="this.style.color='var(--neon-red)'"
                           onmouseout="this.style.color='var(--text-secondary)'">‚úï</button>
                    </div>
                    
                    <!-- ÁªüËÆ°Âç°Áâá -->
                    <div style="
                        display: grid;
                        grid-template-columns: repeat(4, 1fr);
                        gap: 1rem;
                        padding: 1.5rem 2rem;
                        border-bottom: 1px solid var(--border-subtle);
                    ">
                        <div style="
                            background: var(--bg-card);
                            border: 1px solid var(--border-subtle);
                            border-radius: 10px;
                            padding: 1rem;
                            text-align: center;
                        ">
                            <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.25rem;">ÂÖ≥Ê≥®Êï∞Èáè</div>
                            <div style="font-size: 1.75rem; font-weight: 700; color: var(--solana-purple);">${totalTokens}</div>
                        </div>
                        <div style="
                            background: var(--bg-card);
                            border: 1px solid var(--border-subtle);
                            border-radius: 10px;
                            padding: 1rem;
                            text-align: center;
                        ">
                            <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.25rem;">BUY‰ø°Âè∑</div>
                            <div style="font-size: 1.75rem; font-weight: 700; color: var(--solana-green);">${buySignals}</div>
                        </div>
                        <div style="
                            background: var(--bg-card);
                            border: 1px solid var(--border-subtle);
                            border-radius: 10px;
                            padding: 1rem;
                            text-align: center;
                        ">
                            <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.25rem;">HOLD‰ø°Âè∑</div>
                            <div style="font-size: 1.75rem; font-weight: 700; color: var(--amber);">${holdSignals}</div>
                        </div>
                        <div style="
                            background: var(--bg-card);
                            border: 1px solid var(--border-subtle);
                            border-radius: 10px;
                            padding: 1rem;
                            text-align: center;
                        ">
                            <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.25rem;">Âπ≥ÂùáÂàÜÊï∞</div>
                            <div style="font-size: 1.75rem; font-weight: 700; color: var(--text-primary);">${avgScore}</div>
                        </div>
                    </div>
                    
                    <!-- Êìç‰ΩúÊåâÈíÆ -->
                    <div style="
                        display: flex;
                        gap: 1rem;
                        padding: 1rem 2rem;
                        border-bottom: 1px solid var(--border-subtle);
                    ">
                        <button onclick="exportWatchlist()" style="
                            padding: 0.625rem 1rem;
                            background: var(--bg-card);
                            border: 1px solid var(--border-subtle);
                            border-radius: 8px;
                            color: var(--text-primary);
                            font-size: 0.875rem;
                            cursor: pointer;
                            transition: all 0.3s ease;
                            display: flex;
                            align-items: center;
                            gap: 0.5rem;
                        " onmouseover="this.style.borderColor='var(--solana-green)'"
                           onmouseout="this.style.borderColor='var(--border-subtle)'">
                            üìã ÂØºÂá∫ÂàóË°®
                        </button>
                        <button onclick="clearWatchlist()" style="
                            padding: 0.625rem 1rem;
                            background: var(--bg-card);
                            border: 1px solid var(--border-subtle);
                            border-radius: 8px;
                            color: var(--text-secondary);
                            font-size: 0.875rem;
                            cursor: pointer;
                            transition: all 0.3s ease;
                            display: flex;
                            align-items: center;
                            gap: 0.5rem;
                        " onmouseover="this.style.borderColor='var(--neon-red)'; this.style.color='var(--neon-red)'"
                           onmouseout="this.style.borderColor='var(--border-subtle)'; this.style.color='var(--text-secondary)'">
                            üóëÔ∏è Ê∏ÖÁ©∫ÂàóË°®
                        </button>
                    </div>
                    
                    <!-- ÂÖ≥Ê≥®ÂàóË°® -->
                    <div style="
                        padding: 1.5rem 2rem;
                        max-height: 500px;
                        overflow-y: auto;
                    ">
                        <div style="
                            display: grid;
                            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                            gap: 1rem;
                        ">
                            ${watchlistHtml}
                        </div>
                    </div>
                </div>
            `;

            // ÁÇπÂáªËÉåÊôØÂÖ≥Èó≠
            modal.onclick = (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            };

            document.body.appendChild(modal);
            window.currentModal = modal;
        }
        
        // Êü•ÁúãÂÖ≥Ê≥®ÂàóË°®‰∏≠ÁöÑTokenËØ¶ÊÉÖ
        function viewWatchlistTokenDetail(mint) {
            const token = watchlist.find(t => t.mint === mint);
            if (token) {
                closeModal();
                setTimeout(() => {
                    showChartPlatformModal(token);
                }, 300);
            }
        }
        
        // ÂØºÂá∫ÂÖ≥Ê≥®ÂàóË°®
        function exportWatchlist() {
            if (watchlist.length === 0) {
                showNotification('ÂÖ≥Ê≥®ÂàóË°®‰∏∫Á©∫ÔºåÊó†Ê≥ïÂØºÂá∫', 'error');
                return;
            }
            
            const report = {
                timestamp: new Date().toISOString(),
                type: 'WATCHLIST_EXPORT',
                totalTokens: watchlist.length,
                tokens: watchlist
            };
            
            const blob = new Blob([JSON.stringify(report, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `watchlist_${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            showNotification('ÂÖ≥Ê≥®ÂàóË°®Â∑≤ÂØºÂá∫', 'success');
        }
        
        // Ê∏ÖÁ©∫ÂÖ≥Ê≥®ÂàóË°®
        function clearWatchlist() {
            if (watchlist.length === 0) {
                showNotification('ÂÖ≥Ê≥®ÂàóË°®Â∑≤ÁªèÊòØÁ©∫ÁöÑ', 'info');
                return;
            }
            
            if (confirm(`Á°ÆÂÆöË¶ÅÊ∏ÖÁ©∫ÊâÄÊúâ ${watchlist.length} ‰∏™ÂÖ≥Ê≥®ÁöÑTokenÂêóÔºü`)) {
                watchlist = [];
                saveWatchlist();
                showPortfolioPage(); // Âà∑Êñ∞È°µÈù¢
                showNotification('ÂÖ≥Ê≥®ÂàóË°®Â∑≤Ê∏ÖÁ©∫', 'success');
            }
        }

        // Enhanced mock data with more variety
        const mockTokens = [
            {
                mint: "DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263", // BONK - Real Solana token
                symbol: "BONK",
                score: 85,
                recommendation: "BUY",
                riskLevel: "LOW",
                signals: ["üîí Mint Renounced", "üë• Fair Distribution", "üî• High Volume", "‚ö° Active Community"],
                liquidity: "$2.4M",
                liquidityValue: 2400000,
                marketCap: "$500M+",
                marketCapValue: 500000000,
                holders: 700000,
                age: "2m ago",
                ageMinutes: 2,
                supply: "93.5T",
                decimals: 5,
                launchTime: "2022-12-25T00:00:00Z",
                discoveredTime: new Date(Date.now() - 2 * 60 * 1000).toISOString(),
                description: "BONKÊòØSolanaÁîüÊÄÅÁ≥ªÁªü‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ÁãóÁãóÂ∏ÅMeme‰ª£Â∏ÅÔºå‰∫é2022Âπ¥12ÊúàÂú£ËØûËäÇÂèëË°å„ÄÇ50%Á©∫ÊäïÁªôSolanaÁ§æÂå∫ÊàêÂëò„ÄÅÂºÄÂèëËÄÖÂíåNFTÊåÅÊúâËÄÖÔºåÊòØSolanaÁîüÊÄÅ‰∏≠Â∏ÇÂÄºÊúÄÂ§ßÁöÑMemeÂ∏Å‰πã‰∏Ä„ÄÇ",
                website: "https://bonkcoin.com",
                twitter: "https://twitter.com/bonikimu",
                telegram: "https://t.me/Official_Bonk_Inu"
            },
            {
                mint: "JUPyiwrYJFskUPiHa7hkeR8VUtAeFoSYbKedZNsDvCN", // Jupiter (JUP) - Real Solana token
                symbol: "JUP",
                score: 92,
                recommendation: "BUY",
                riskLevel: "LOW",
                signals: ["üìà Top DEX Aggregator", "üîí Audited", "‚ö° High TVL", "üë• Strong Team"],
                liquidity: "$100M+",
                liquidityValue: 100000000,
                marketCap: "$1B+",
                marketCapValue: 1000000000,
                holders: 200000,
                age: "5m ago",
                ageMinutes: 5,
                supply: "10B",
                decimals: 6,
                launchTime: "2024-01-31T00:00:00Z",
                discoveredTime: new Date(Date.now() - 5 * 60 * 1000).toISOString(),
                description: "JupiterÊòØSolana‰∏äÊúÄÂ§ßÁöÑDEXËÅöÂêàÂô®ÔºåÊèê‰æõÊúÄ‰ºò‰∫§ÊòìË∑ØÂæÑÂíå‰ª∑Ê†ºÂèëÁé∞„ÄÇJUP‰ª£Â∏Å‰∫é2024Âπ¥1Êúà31Êó•ÂèëË°åÔºåÁî®‰∫éÊ≤ªÁêÜ„ÄÅË¥®ÊäºÂíåÂπ≥Âè∞ÊøÄÂä±„ÄÇJupiterÂõ¢ÈòüÁî±ÁªèÈ™å‰∏∞ÂØåÁöÑDeFiÂºÄÂèëËÄÖÁªÑÊàê„ÄÇ",
                website: "https://jup.ag",
                twitter: "https://twitter.com/JupiterExchange",
                telegram: "https://t.me/jabormmunity"
            },
            {
                mint: "RNDRxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", // ÊºîÁ§∫Áî®ÂÅáÂú∞ÂùÄ - Ê®°ÊãüÊñ∞ÂèëÁé∞ÁöÑÈ´òÈ£éÈô©Token
                symbol: "SCAM",
                score: 15,
                recommendation: "AVOID",
                riskLevel: "HIGH",
                signals: ["üêã Whale Concentrated", "‚ö†Ô∏è Mint Active", "üìâ Low Liquidity", "üö® Honeypot Risk"],
                liquidity: "$5K",
                liquidityValue: 5000,
                marketCap: "$50K",
                marketCapValue: 50000,
                holders: 23,
                age: "1m ago",
                ageMinutes: 1,
                supply: "1,000,000,000",
                decimals: 9,
                launchTime: new Date(Date.now() - 30 * 60 * 1000).toISOString(),
                discoveredTime: new Date(Date.now() - 1 * 60 * 1000).toISOString(),
                description: "‚ö†Ô∏è È´òÈ£éÈô©Ë≠¶ÂëäÔºöÊ≠§‰ª£Â∏ÅÂ≠òÂú®Â§öÈ°πÈ£éÈô©ÊåáÊ†á„ÄÇÂâç10Âú∞ÂùÄÊåÅÊúâË∂ÖËøá80%‰ª£Â∏ÅÔºåMintÊùÉÈôêÊú™ÊîæÂºÉÔºåÊµÅÂä®ÊÄßÊûÅ‰ΩéÔºåÂèØËÉΩ‰∏∫ËúúÁΩêÂêàÁ∫¶„ÄÇÂº∫ÁÉàÂª∫ËÆÆËøúÁ¶ªÔºÅ",
                website: "",
                twitter: "",
                telegram: ""
            },
            {
                mint: "7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj", // Lido staked SOL (stSOL)
                symbol: "stSOL",
                score: 88,
                recommendation: "BUY",
                riskLevel: "LOW",
                signals: ["üéØ Liquid Staking", "üë• Lido Protocol", "üìä Stable APY", "üîí Audited"],
                liquidity: "$50M+",
                liquidityValue: 50000000,
                marketCap: "$300M+",
                marketCapValue: 300000000,
                holders: 50000,
                age: "8m ago",
                ageMinutes: 8,
                supply: "Variable",
                decimals: 9,
                launchTime: "2021-09-01T00:00:00Z",
                discoveredTime: new Date(Date.now() - 8 * 60 * 1000).toISOString(),
                description: "stSOLÊòØLido FinanceÂú®Solana‰∏äÁöÑÊµÅÂä®ÊÄßË¥®Êäº‰ª£Â∏Å„ÄÇÁî®Êà∑ÂèØ‰ª•Ë¥®ÊäºSOLËé∑ÂæóstSOLÔºåÂêåÊó∂‰øùÊåÅÊµÅÂä®ÊÄßÂèÇ‰∏éDeFi„ÄÇLidoÊòØÂÖ®ÁêÉÊúÄÂ§ßÁöÑÊµÅÂä®ÊÄßË¥®ÊäºÂçèËÆÆ‰πã‰∏Ä„ÄÇ",
                website: "https://solana.lido.fi",
                twitter: "https://twitter.com/LidoFinance",
                telegram: ""
            },
            {
                mint: "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v", // USD Coin (USDC) - Real Solana token
                symbol: "USDC",
                score: 95,
                recommendation: "HOLD",
                riskLevel: "LOW",
                signals: ["üè¶ Circle Issued", "üîí Regulated", "üíé 1:1 USD Backed", "üìä High Liquidity"],
                liquidity: "$1B+",
                liquidityValue: 1000000000,
                marketCap: "$2B+ on Solana",
                marketCapValue: 2000000000,
                holders: 1000000,
                age: "3m ago",
                ageMinutes: 3,
                supply: "Variable",
                decimals: 6,
                launchTime: "2020-01-01T00:00:00Z",
                discoveredTime: new Date(Date.now() - 3 * 60 * 1000).toISOString(),
                description: "USDCÊòØÁî±CircleÂèëË°åÁöÑÂêàËßÑÁ®≥ÂÆöÂ∏ÅÔºå‰∏éÁæéÂÖÉ1:1ÈîöÂÆöÔºåÂèóÁõëÁÆ°Êú∫ÊûÑÁõëÁù£„ÄÇÂú®SolanaÈìæ‰∏äÂπøÊ≥õÁî®‰∫é‰∫§Êòì„ÄÅÂÄüË¥∑ÂíåÊîØ‰ªòÔºåÊòØÁîüÊÄÅÁ≥ªÁªü‰∏≠ÊúÄÈáçË¶ÅÁöÑÁ®≥ÂÆöÂ∏Å„ÄÇ",
                website: "https://www.circle.com/usdc",
                twitter: "https://twitter.com/circle",
                telegram: ""
            },
            {
                mint: "mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So", // Marinade staked SOL (mSOL) - Real Solana token
                symbol: "mSOL",
                score: 90,
                recommendation: "BUY",
                riskLevel: "LOW",
                signals: ["üéØ Liquid Staking", "üîí Audited", "üìä ~7% APY", "üë• Native Solana"],
                liquidity: "$80M+",
                liquidityValue: 80000000,
                marketCap: "$400M+",
                marketCapValue: 400000000,
                holders: 100000,
                age: "30s ago",
                ageMinutes: 0.5,
                supply: "Variable",
                decimals: 9,
                launchTime: "2021-08-01T00:00:00Z",
                discoveredTime: new Date(Date.now() - 0.5 * 60 * 1000).toISOString(),
                description: "mSOLÊòØMarinade FinanceÁöÑÊµÅÂä®ÊÄßË¥®Êäº‰ª£Â∏ÅÔºåÊòØSolanaÂéüÁîüÁöÑË¥®ÊäºÂçèËÆÆ„ÄÇÁî®Êà∑Ë¥®ÊäºSOLËé∑ÂæómSOLÔºå‰∫´ÂèóÁ∫¶7%Âπ¥ÂåñÊî∂ÁõäÂêåÊó∂‰øùÊåÅÊµÅÂä®ÊÄß„ÄÇMarinadeÊòØSolanaÁîüÊÄÅ‰∏≠TVLÊúÄÈ´òÁöÑÂçèËÆÆ‰πã‰∏Ä„ÄÇ",
                website: "https://marinade.finance",
                twitter: "https://twitter.com/MarinadeFinance",
                telegram: "https://t.me/marinadefi"
            }
        ];

        // Filter and Sort Functions
        function setFilter(filterType) {
            currentFilter = filterType;
            
            // Update button states - ÂÆâÂÖ®Âú∞ÁßªÈô§ÊâÄÊúâactiveÁ±ª
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // ÂÆâÂÖ®Âú∞Ê∑ªÂä†activeÁ±ª
            const targetBtn = document.querySelector(`[data-filter="${filterType}"]`);
            if (targetBtn) {
                targetBtn.classList.add('active');
            }
            
            applyFiltersAndSort();
        }

        // Buy Signals Âç°ÁâáÁÇπÂáªÂêéÁöÑÂä®‰Ωú
        function showBuySignalsActions() {
            const buyTokens = tokens.filter(token => token.recommendation === 'BUY');
            
            if (buyTokens.length === 0) {
                showNotification('ÂΩìÂâçÊ≤°ÊúâBUY‰ø°Âè∑ÁöÑToken', 'info');
                return;
            }

            // ÂàõÂª∫Âä®‰ΩúÈÄâÊã©Ê®°ÊÄÅÊ°Ü
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(10, 10, 10, 0.9);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 2000;
                backdrop-filter: blur(10px);
                animation: fadeIn 0.3s ease;
            `;

            modal.innerHTML = `
                <div style="
                    background: var(--bg-card);
                    border: 1px solid var(--border-subtle);
                    border-radius: 16px;
                    padding: 2rem;
                    max-width: 600px;
                    width: 90%;
                    backdrop-filter: blur(20px);
                    animation: slideUp 0.3s ease;
                ">
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <h3 style="color: var(--text-primary); margin-bottom: 0.5rem; font-size: 1.5rem;">
                            üéØ ÂèëÁé∞ ${buyTokens.length} ‰∏™BUY‰ø°Âè∑
                        </h3>
                        <p style="color: var(--text-secondary); font-size: 0.875rem;">
                            ÈÄâÊã©‰Ω†ÊÉ≥Ë¶ÅÊâßË°åÁöÑÊìç‰Ωú
                        </p>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 2rem;">
                        <button onclick="executeBulkTrade('${buyTokens.map(t => t.mint).join(',')}')" style="
                            padding: 1.5rem;
                            background: linear-gradient(135deg, var(--solana-green), #0d7377);
                            border: none;
                            border-radius: 12px;
                            color: white;
                            cursor: pointer;
                            transition: all 0.3s ease;
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            gap: 0.5rem;
                        " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 30px var(--glow-green)'" 
                           onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                            <div style="font-size: 2rem;">üöÄ</div>
                            <div style="font-weight: 600;">ÊâπÈáè‰∫§Êòì</div>
                            <div style="font-size: 0.75rem; opacity: 0.8;">‰∏ÄÈîÆË¥≠‰π∞ÊâÄÊúâBUY‰ø°Âè∑Token</div>
                        </button>

                        <button onclick="openPortfolioManager('${buyTokens.map(t => t.mint).join(',')}')" style="
                            padding: 1.5rem;
                            background: linear-gradient(135deg, var(--solana-purple), #6b46c1);
                            border: none;
                            border-radius: 12px;
                            color: white;
                            cursor: pointer;
                            transition: all 0.3s ease;
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            gap: 0.5rem;
                        " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 30px var(--glow-purple)'" 
                           onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                            <div style="font-size: 2rem;">üìä</div>
                            <div style="font-weight: 600;">ÊäïËµÑÁªÑÂêà</div>
                            <div style="font-size: 0.75rem; opacity: 0.8;">Ê∑ªÂä†Âà∞ÊäïËµÑÁªÑÂêàÁÆ°ÁêÜ</div>
                        </button>

                        <button onclick="exportBuySignals('${buyTokens.map(t => t.mint).join(',')}')" style="
                            padding: 1.5rem;
                            background: linear-gradient(135deg, var(--amber), #d97706);
                            border: none;
                            border-radius: 12px;
                            color: black;
                            cursor: pointer;
                            transition: all 0.3s ease;
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            gap: 0.5rem;
                        " onmouseover="this.style.transform='translateY(-2px)'" 
                           onmouseout="this.style.transform='translateY(0)'">
                            <div style="font-size: 2rem;">üìã</div>
                            <div style="font-weight: 600;">ÂØºÂá∫Êä•Âëä</div>
                            <div style="font-size: 0.75rem; opacity: 0.8;">ÂØºÂá∫BUY‰ø°Âè∑ËØ¶ÁªÜÊä•Âëä</div>
                        </button>

                        <button onclick="setAlerts('${buyTokens.map(t => t.mint).join(',')}')" style="
                            padding: 1.5rem;
                            background: linear-gradient(135deg, var(--neon-red), #dc2626);
                            border: none;
                            border-radius: 12px;
                            color: white;
                            cursor: pointer;
                            transition: all 0.3s ease;
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            gap: 0.5rem;
                        " onmouseover="this.style.transform='translateY(-2px)'" 
                           onmouseout="this.style.transform='translateY(0)'">
                            <div style="font-size: 2rem;">üîî</div>
                            <div style="font-weight: 600;">ËÆæÁΩÆÊèêÈÜí</div>
                            <div style="font-size: 0.75rem; opacity: 0.8;">‰ª∑Ê†ºÂèòÂä®ÊèêÈÜí</div>
                        </button>
                    </div>

                    <div style="display: flex; gap: 1rem;">
                        <button onclick="closeModal()" style="
                            flex: 1;
                            padding: 0.75rem;
                            background: var(--bg-dark);
                            border: 1px solid var(--border-subtle);
                            border-radius: 8px;
                            color: var(--text-secondary);
                            cursor: pointer;
                            transition: all 0.3s ease;
                        " onmouseover="this.style.borderColor='var(--neon-red)'; this.style.color='var(--neon-red)'" 
                           onmouseout="this.style.borderColor='var(--border-subtle)'; this.style.color='var(--text-secondary)'">
                            ÂèñÊ∂à
                        </button>
                        <button onclick="viewBuySignalsDetails('${buyTokens.map(t => t.mint).join(',')}')" style="
                            flex: 2;
                            padding: 0.75rem;
                            background: linear-gradient(135deg, var(--solana-green), var(--solana-purple));
                            border: none;
                            border-radius: 8px;
                            color: white;
                            font-weight: 600;
                            cursor: pointer;
                            transition: all 0.3s ease;
                        " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 30px var(--glow-green)'" 
                           onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                            üìà Êü•ÁúãËØ¶ÁªÜÂàÜÊûê
                        </button>
                    </div>
                </div>
            `;

            // Add click outside to close
            modal.onclick = (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            };

            document.body.appendChild(modal);
            window.currentModal = modal;
        }

        // ÊâπÈáè‰∫§ÊòìÂäüËÉΩ
        function executeBulkTrade(mintAddresses) {
            const mints = mintAddresses.split(',');
            
            if (!walletConnected) {
                showNotification('ËØ∑ÂÖàËøûÊé•Èí±ÂåÖ', 'error');
                closeModal();
                return;
            }

            showNotification(`ÂáÜÂ§áÊâπÈáè‰∫§Êòì ${mints.length} ‰∏™Token...`, 'info');
            
            // Ê®°ÊãüÊâπÈáè‰∫§ÊòìËøáÁ®ã
            setTimeout(() => {
                showNotification('üöÄ ÊâπÈáè‰∫§ÊòìÂ∑≤Êèê‰∫§Âà∞Âå∫ÂùóÈìæ', 'success');
                closeModal();
            }, 2000);
        }

        // ÊäïËµÑÁªÑÂêàÁÆ°ÁêÜ - ÊâπÈáèÊ∑ªÂä†Âà∞ÂÖ≥Ê≥®ÂàóË°®
        function openPortfolioManager(mintAddresses) {
            const mints = mintAddresses.split(',');
            const tokensToAdd = tokens.filter(token => mints.includes(token.mint));
            let addedCount = 0;
            
            tokensToAdd.forEach(token => {
                if (!isInWatchlist(token.mint)) {
                    const watchItem = {
                        mint: token.mint,
                        symbol: token.symbol,
                        score: token.score,
                        recommendation: token.recommendation,
                        liquidity: token.liquidity,
                        marketCap: token.marketCap,
                        holders: token.holders,
                        signals: token.signals,
                        launchTime: token.launchTime,
                        addedTime: new Date().toISOString(),
                        addedPrice: token.marketCapValue,
                        description: token.description,
                        website: token.website,
                        twitter: token.twitter,
                        telegram: token.telegram
                    };
                    watchlist.push(watchItem);
                    addedCount++;
                }
            });
            
            if (addedCount > 0) {
                saveWatchlist();
                updateDisplay();
            }
            
            closeModal();
            showNotification(`Â∑≤Ê∑ªÂä† ${addedCount} ‰∏™TokenÂà∞ÂÖ≥Ê≥®ÂàóË°®${addedCount < mints.length ? `Ôºà${mints.length - addedCount}‰∏™Â∑≤Â≠òÂú®Ôºâ` : ''}`, 'success');
            
            // ÊâìÂºÄÊäïËµÑÁªÑÂêàÈ°µÈù¢
            setTimeout(() => {
                showPortfolioPage();
            }, 500);
        }

        // ÂØºÂá∫BUY‰ø°Âè∑Êä•Âëä
        function exportBuySignals(mintAddresses) {
            const mints = mintAddresses.split(',');
            const buyTokens = tokens.filter(token => mints.includes(token.mint));
            
            const report = {
                timestamp: new Date().toISOString(),
                type: 'BUY_SIGNALS_REPORT',
                totalTokens: buyTokens.length,
                averageScore: Math.round(buyTokens.reduce((sum, t) => sum + t.score, 0) / buyTokens.length),
                tokens: buyTokens.map(token => ({
                    symbol: token.symbol,
                    mint: token.mint,
                    score: token.score,
                    liquidity: token.liquidity,
                    marketCap: token.marketCap,
                    holders: token.holders,
                    signals: token.signals,
                    recommendation: token.recommendation
                }))
            };
            
            const blob = new Blob([JSON.stringify(report, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `buy_signals_report_${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            showNotification('BUY‰ø°Âè∑Êä•ÂëäÂ∑≤ÂØºÂá∫', 'success');
            closeModal();
        }

        // ËÆæÁΩÆ‰ª∑Ê†ºÊèêÈÜí
        function setAlerts(mintAddresses) {
            const mints = mintAddresses.split(',');
            showNotification(`Â∑≤‰∏∫ ${mints.length} ‰∏™TokenËÆæÁΩÆ‰ª∑Ê†ºÊèêÈÜí`, 'success');
            closeModal();
        }

        // Êü•ÁúãBUY‰ø°Âè∑ËØ¶ÁªÜÂàÜÊûê
        function viewBuySignalsDetails(mintAddresses) {
            const mints = mintAddresses.split(',');
            const buyTokens = tokens.filter(token => mints.includes(token.mint));
            
            // ÂàõÂª∫ËØ¶ÁªÜÂàÜÊûêÈ°µÈù¢
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(10, 10, 10, 0.9);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 2001;
                backdrop-filter: blur(10px);
                animation: fadeIn 0.3s ease;
            `;

            const tokensHtml = buyTokens.map(token => `
                <div style="
                    background: var(--bg-secondary);
                    border: 1px solid var(--border-subtle);
                    border-radius: 8px;
                    padding: 1rem;
                    margin-bottom: 1rem;
                ">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        <div style="font-weight: 600; color: var(--text-primary);">${token.symbol}</div>
                        <div style="
                            background: var(--solana-green);
                            color: black;
                            padding: 0.25rem 0.5rem;
                            border-radius: 12px;
                            font-size: 0.75rem;
                            font-weight: 600;
                        ">Score: ${token.score}</div>
                    </div>
                    <div style="font-family: 'JetBrains Mono', monospace; font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.5rem;">
                        ${token.mint}
                    </div>
                    <div style="display: flex; gap: 1rem; font-size: 0.75rem; color: var(--text-secondary);">
                        <span>üí∞ ${token.liquidity}</span>
                        <span>üìà ${token.marketCap}</span>
                        <span>üë• ${token.holders}</span>
                    </div>
                    <div style="margin-top: 0.5rem;">
                        ${token.signals.map(signal => `<span style="
                            display: inline-block;
                            background: rgba(255, 255, 255, 0.1);
                            padding: 0.125rem 0.5rem;
                            border-radius: 8px;
                            font-size: 0.625rem;
                            margin-right: 0.25rem;
                            margin-bottom: 0.25rem;
                        ">${signal}</span>`).join('')}
                    </div>
                </div>
            `).join('');

            modal.innerHTML = `
                <div style="
                    background: var(--bg-card);
                    border: 1px solid var(--border-subtle);
                    border-radius: 16px;
                    padding: 2rem;
                    max-width: 800px;
                    width: 90%;
                    max-height: 80vh;
                    overflow-y: auto;
                    backdrop-filter: blur(20px);
                    animation: slideUp 0.3s ease;
                ">
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <h3 style="color: var(--text-primary); margin-bottom: 0.5rem; font-size: 1.5rem;">
                            üìä BUY‰ø°Âè∑ËØ¶ÁªÜÂàÜÊûê
                        </h3>
                        <p style="color: var(--text-secondary); font-size: 0.875rem;">
                            ÂÖ± ${buyTokens.length} ‰∏™È´òË¥®ÈáèÊäïËµÑÊú∫‰ºö
                        </p>
                    </div>

                    <div style="margin-bottom: 2rem;">
                        ${tokensHtml}
                    </div>

                    <button onclick="this.parentElement.parentElement.remove()" style="
                        width: 100%;
                        padding: 0.75rem;
                        background: linear-gradient(135deg, var(--solana-green), var(--solana-purple));
                        border: none;
                        border-radius: 8px;
                        color: white;
                        font-weight: 600;
                        cursor: pointer;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.transform='translateY(-2px)'" 
                       onmouseout="this.style.transform='translateY(0)'">
                        ÂÖ≥Èó≠
                    </button>
                </div>
            `;

            document.body.appendChild(modal);
            window.currentModal = modal;
        }

        function clearFilters() {
            currentFilter = 'all';
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // ÂÆâÂÖ®Âú∞Ê∑ªÂä†activeÁ±ª
            const allBtn = document.querySelector('[data-filter="all"]');
            if (allBtn) {
                allBtn.classList.add('active');
            }
            
            applyFiltersAndSort();
        }

        function setSortOption() {
            currentSort = document.getElementById('sortSelect').value;
            applyFiltersAndSort();
        }

        function applyFiltersAndSort() {
            // Apply filters
            if (currentFilter === 'all') {
                filteredTokens = [...tokens];
            } else {
                filteredTokens = tokens.filter(token => token.recommendation === currentFilter);
            }

            // Apply sorting
            filteredTokens.sort((a, b) => {
                switch (currentSort) {
                    case 'score-desc':
                        return b.score - a.score;
                    case 'score-asc':
                        return a.score - b.score;
                    case 'age-asc':
                        return a.ageMinutes - b.ageMinutes;
                    case 'age-desc':
                        return b.ageMinutes - a.ageMinutes;
                    case 'liquidity-desc':
                        return b.liquidityValue - a.liquidityValue;
                    case 'liquidity-asc':
                        return a.liquidityValue - b.liquidityValue;
                    case 'marketcap-desc':
                        return b.marketCapValue - a.marketCapValue;
                    case 'marketcap-asc':
                        return a.marketCapValue - b.marketCapValue;
                    case 'holders-desc':
                        return b.holders - a.holders;
                    case 'holders-asc':
                        return a.holders - b.holders;
                    default:
                        return b.score - a.score;
                }
            });

            updateDisplay();
        }

        // Test function for debugging
        // Chart and Trading Functions
        function openTokenChart(token) {
            // Create a modal to let user choose chart platform
            showChartPlatformModal(token);
        }

        function showChartPlatformModal(token) {
            // Create modal overlay
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(10, 10, 10, 0.9);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 2000;
                backdrop-filter: blur(10px);
                animation: fadeIn 0.3s ease;
            `;

            // ÁîüÊàêÁ§æ‰∫§ÈìæÊé•
            const socialLinks = [];
            if (token.website) {
                socialLinks.push(`<a href="${token.website}" target="_blank" style="
                    display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem;
                    background: var(--bg-secondary); border: 1px solid var(--border-subtle);
                    border-radius: 8px; color: var(--text-primary); text-decoration: none;
                    transition: all 0.3s ease;
                " onmouseover="this.style.borderColor='var(--solana-green)'" 
                   onmouseout="this.style.borderColor='var(--border-subtle)'">
                    üåê ÂÆòÁΩë
                </a>`);
            }
            if (token.twitter) {
                socialLinks.push(`<a href="${token.twitter}" target="_blank" style="
                    display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem;
                    background: var(--bg-secondary); border: 1px solid var(--border-subtle);
                    border-radius: 8px; color: var(--text-primary); text-decoration: none;
                    transition: all 0.3s ease;
                " onmouseover="this.style.borderColor='var(--solana-purple)'" 
                   onmouseout="this.style.borderColor='var(--border-subtle)'">
                    üê¶ Twitter
                </a>`);
            }
            if (token.telegram) {
                socialLinks.push(`<a href="${token.telegram}" target="_blank" style="
                    display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem;
                    background: var(--bg-secondary); border: 1px solid var(--border-subtle);
                    border-radius: 8px; color: var(--text-primary); text-decoration: none;
                    transition: all 0.3s ease;
                " onmouseover="this.style.borderColor='var(--amber)'" 
                   onmouseout="this.style.borderColor='var(--border-subtle)'">
                    üì± Telegram
                </a>`);
            }

            modal.innerHTML = `
                <div style="
                    background: var(--bg-card);
                    border: 1px solid var(--border-subtle);
                    border-radius: 16px;
                    padding: 2rem;
                    max-width: 700px;
                    width: 90%;
                    max-height: 85vh;
                    overflow-y: auto;
                    backdrop-filter: blur(20px);
                    animation: slideUp 0.3s ease;
                ">
                    <!-- Token Âü∫Êú¨‰ø°ÊÅØ -->
                    <div style="text-align: center; margin-bottom: 1.5rem;">
                        <h3 style="color: var(--text-primary); margin-bottom: 0.5rem; font-size: 1.5rem;">
                            ${token.symbol}
                        </h3>
                        <p style="color: var(--text-secondary); font-size: 0.75rem; font-family: 'JetBrains Mono', monospace;">
                            ${token.mint}
                        </p>
                        <div style="
                            display: inline-flex;
                            align-items: center;
                            gap: 0.5rem;
                            margin-top: 0.75rem;
                            padding: 0.5rem 1rem;
                            background: ${token.recommendation === 'BUY' ? 'var(--solana-green)' : 
                                       token.recommendation === 'HOLD' ? 'var(--amber)' : 'var(--neon-red)'};
                            color: ${token.recommendation === 'AVOID' ? 'white' : 'black'};
                            border-radius: 20px;
                            font-weight: 600;
                            font-size: 0.875rem;
                        ">
                            <span>üéØ Alpha Score: ${token.score}</span>
                            <span>‚Ä¢</span>
                            <span>${token.recommendation}</span>
                        </div>
                    </div>

                    <!-- Tab ÂàáÊç¢ -->
                    <div style="display: flex; gap: 0.5rem; margin-bottom: 1.5rem; border-bottom: 1px solid var(--border-subtle); padding-bottom: 1rem;">
                        <button id="tabChart" onclick="switchTab('chart')" style="
                            flex: 1; padding: 0.75rem; background: var(--solana-green); color: black;
                            border: none; border-radius: 8px; font-weight: 600; cursor: pointer;
                            transition: all 0.3s ease;
                        ">üìä KÁ∫øÂõæË°®</button>
                        <button id="tabInfo" onclick="switchTab('info')" style="
                            flex: 1; padding: 0.75rem; background: var(--bg-secondary); color: var(--text-secondary);
                            border: 1px solid var(--border-subtle); border-radius: 8px; font-weight: 600; cursor: pointer;
                            transition: all 0.3s ease;
                        ">üìã È°πÁõÆÁÆÄ‰ªã</button>
                    </div>

                    <!-- KÁ∫øÂõæË°® Tab ÂÜÖÂÆπ -->
                    <div id="chartContent" style="display: block;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
                            <button onclick="openChart('${token.mint}', 'dexscreener')" style="
                                padding: 1rem;
                                background: linear-gradient(135deg, #1a1a2e, #16213e);
                                border: 1px solid var(--border-subtle);
                                border-radius: 12px;
                                color: var(--text-primary);
                                cursor: pointer;
                                transition: all 0.3s ease;
                                display: flex;
                                flex-direction: column;
                                align-items: center;
                                gap: 0.5rem;
                            " onmouseover="this.style.borderColor='var(--solana-green)'; this.style.transform='translateY(-2px)'" 
                               onmouseout="this.style.borderColor='var(--border-subtle)'; this.style.transform='translateY(0)'">
                                <div style="font-size: 2rem;">üîç</div>
                                <div style="font-weight: 600;">DexScreener</div>
                                <div style="font-size: 0.75rem; color: var(--text-secondary);">Professional Charts</div>
                            </button>

                            <button onclick="openChart('${token.mint}', 'birdeye')" style="
                                padding: 1rem;
                                background: linear-gradient(135deg, #2d1b69, #1a1a2e);
                                border: 1px solid var(--border-subtle);
                                border-radius: 12px;
                                color: var(--text-primary);
                                cursor: pointer;
                                transition: all 0.3s ease;
                                display: flex;
                                flex-direction: column;
                                align-items: center;
                                gap: 0.5rem;
                            " onmouseover="this.style.borderColor='var(--solana-purple)'; this.style.transform='translateY(-2px)'" 
                               onmouseout="this.style.borderColor='var(--border-subtle)'; this.style.transform='translateY(0)'">
                                <div style="font-size: 2rem;">üê¶</div>
                                <div style="font-weight: 600;">Birdeye</div>
                                <div style="font-size: 0.75rem; color: var(--text-secondary);">Solana Native</div>
                            </button>

                            <button onclick="openChart('${token.mint}', 'jupiter')" style="
                                padding: 1rem;
                                background: linear-gradient(135deg, #1a4d3a, #1a1a2e);
                                border: 1px solid var(--border-subtle);
                                border-radius: 12px;
                                color: var(--text-primary);
                                cursor: pointer;
                                transition: all 0.3s ease;
                                display: flex;
                                flex-direction: column;
                                align-items: center;
                                gap: 0.5rem;
                            " onmouseover="this.style.borderColor='var(--solana-green)'; this.style.transform='translateY(-2px)'" 
                               onmouseout="this.style.borderColor='var(--border-subtle)'; this.style.transform='translateY(0)'">
                                <div style="font-size: 2rem;">ü™ê</div>
                                <div style="font-weight: 600;">Jupiter</div>
                                <div style="font-size: 0.75rem; color: var(--text-secondary);">Trading + Charts</div>
                            </button>

                            <button onclick="openChart('${token.mint}', 'raydium')" style="
                                padding: 1rem;
                                background: linear-gradient(135deg, #4d1a4d, #1a1a2e);
                                border: 1px solid var(--border-subtle);
                                border-radius: 12px;
                                color: var(--text-primary);
                                cursor: pointer;
                                transition: all 0.3s ease;
                                display: flex;
                                flex-direction: column;
                                align-items: center;
                                gap: 0.5rem;
                            " onmouseover="this.style.borderColor='var(--solana-purple)'; this.style.transform='translateY(-2px)'" 
                               onmouseout="this.style.borderColor='var(--border-subtle)'; this.style.transform='translateY(0)'">
                                <div style="font-size: 2rem;">‚ö°</div>
                                <div style="font-weight: 600;">Raydium</div>
                                <div style="font-size: 0.75rem; color: var(--text-secondary);">AMM + Analytics</div>
                            </button>
                        </div>

                        <button onclick="openChart('${token.mint}', 'all')" style="
                            width: 100%;
                            padding: 0.75rem;
                            background: linear-gradient(135deg, var(--solana-green), var(--solana-purple));
                            border: none;
                            border-radius: 8px;
                            color: white;
                            font-weight: 600;
                            cursor: pointer;
                            transition: all 0.3s ease;
                            margin-bottom: 1rem;
                        " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 30px var(--glow-green)'" 
                           onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                            üöÄ ÊâìÂºÄÊâÄÊúâÂπ≥Âè∞
                        </button>
                    </div>

                    <!-- È°πÁõÆÁÆÄ‰ªã Tab ÂÜÖÂÆπ -->
                    <div id="infoContent" style="display: none;">
                        <!-- È°πÁõÆÊèèËø∞ -->
                        <div style="
                            background: var(--bg-secondary);
                            border: 1px solid var(--border-subtle);
                            border-radius: 12px;
                            padding: 1.5rem;
                            margin-bottom: 1rem;
                        ">
                            <h4 style="color: var(--text-primary); margin-bottom: 0.75rem; font-size: 1rem;">
                                üìñ È°πÁõÆ‰ªãÁªç
                            </h4>
                            <p style="color: var(--text-secondary); line-height: 1.6; font-size: 0.875rem;">
                                ${token.description || 'ÊöÇÊó†È°πÁõÆ‰ªãÁªç‰ø°ÊÅØ„ÄÇ'}
                            </p>
                        </div>

                        <!-- Ê†∏ÂøÉÊï∞ÊçÆ -->
                        <div style="
                            display: grid;
                            grid-template-columns: repeat(2, 1fr);
                            gap: 1rem;
                            margin-bottom: 1rem;
                        ">
                            <div style="background: var(--bg-secondary); border: 1px solid var(--border-subtle); border-radius: 8px; padding: 1rem; text-align: center;">
                                <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.25rem;">ÊµÅÂä®ÊÄß</div>
                                <div style="font-size: 1.25rem; font-weight: 700; color: var(--solana-green);">${token.liquidity}</div>
                            </div>
                            <div style="background: var(--bg-secondary); border: 1px solid var(--border-subtle); border-radius: 8px; padding: 1rem; text-align: center;">
                                <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.25rem;">Â∏ÇÂÄº</div>
                                <div style="font-size: 1.25rem; font-weight: 700; color: var(--solana-purple);">${token.marketCap}</div>
                            </div>
                            <div style="background: var(--bg-secondary); border: 1px solid var(--border-subtle); border-radius: 8px; padding: 1rem; text-align: center;">
                                <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.25rem;">ÊåÅÊúâ‰∫∫Êï∞</div>
                                <div style="font-size: 1.25rem; font-weight: 700; color: var(--text-primary);">${token.holders.toLocaleString()}</div>
                            </div>
                            <div style="background: var(--bg-secondary); border: 1px solid var(--border-subtle); border-radius: 8px; padding: 1rem; text-align: center;">
                                <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.25rem;">ÊÄª‰æõÂ∫îÈáè</div>
                                <div style="font-size: 1.25rem; font-weight: 700; color: var(--text-primary);">${token.supply}</div>
                            </div>
                        </div>

                        <!-- È£éÈô©‰ø°Âè∑ -->
                        <div style="
                            background: var(--bg-secondary);
                            border: 1px solid var(--border-subtle);
                            border-radius: 12px;
                            padding: 1rem;
                            margin-bottom: 1rem;
                        ">
                            <h4 style="color: var(--text-primary); margin-bottom: 0.75rem; font-size: 0.875rem;">
                                üîç ÂàÜÊûê‰ø°Âè∑
                            </h4>
                            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                                ${token.signals.map(signal => `
                                    <span style="
                                        padding: 0.25rem 0.75rem;
                                        background: rgba(255, 255, 255, 0.1);
                                        border: 1px solid var(--border-subtle);
                                        border-radius: 12px;
                                        font-size: 0.75rem;
                                        color: var(--text-secondary);
                                    ">${signal}</span>
                                `).join('')}
                            </div>
                        </div>

                        <!-- Á§æ‰∫§ÈìæÊé• -->
                        ${socialLinks.length > 0 ? `
                            <div style="margin-bottom: 1rem;">
                                <h4 style="color: var(--text-primary); margin-bottom: 0.75rem; font-size: 0.875rem;">
                                    üîó Áõ∏ÂÖ≥ÈìæÊé•
                                </h4>
                                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                                    ${socialLinks.join('')}
                                </div>
                            </div>
                        ` : ''}
                    </div>

                    <!-- ÂÖ≥Èó≠ÊåâÈíÆ -->
                    <button onclick="closeModal()" style="
                        width: 100%;
                        padding: 0.75rem;
                        background: var(--bg-dark);
                        border: 1px solid var(--border-subtle);
                        border-radius: 8px;
                        color: var(--text-secondary);
                        cursor: pointer;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.borderColor='var(--neon-red)'; this.style.color='var(--neon-red)'" 
                       onmouseout="this.style.borderColor='var(--border-subtle)'; this.style.color='var(--text-secondary)'">
                        ÂÖ≥Èó≠
                    </button>
                </div>
            `;

            // Add click outside to close
            modal.onclick = (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            };

            document.body.appendChild(modal);
            window.currentModal = modal;
        }

        // Tab ÂàáÊç¢ÂáΩÊï∞
        function switchTab(tab) {
            const chartContent = document.getElementById('chartContent');
            const infoContent = document.getElementById('infoContent');
            const tabChart = document.getElementById('tabChart');
            const tabInfo = document.getElementById('tabInfo');
            
            if (tab === 'chart') {
                chartContent.style.display = 'block';
                infoContent.style.display = 'none';
                tabChart.style.background = 'var(--solana-green)';
                tabChart.style.color = 'black';
                tabChart.style.border = 'none';
                tabInfo.style.background = 'var(--bg-secondary)';
                tabInfo.style.color = 'var(--text-secondary)';
                tabInfo.style.border = '1px solid var(--border-subtle)';
            } else {
                chartContent.style.display = 'none';
                infoContent.style.display = 'block';
                tabInfo.style.background = 'var(--solana-purple)';
                tabInfo.style.color = 'white';
                tabInfo.style.border = 'none';
                tabChart.style.background = 'var(--bg-secondary)';
                tabChart.style.color = 'var(--text-secondary)';
                tabChart.style.border = '1px solid var(--border-subtle)';
            }
        }

        function openChart(mintAddress, platform) {
            const urls = {
                dexscreener: `https://dexscreener.com/solana/${mintAddress}`,
                birdeye: `https://birdeye.so/token/${mintAddress}?chain=solana`,
                jupiter: `https://jup.ag/swap/SOL-${mintAddress}`,
                raydium: `https://raydium.io/swap/?inputCurrency=sol&outputCurrency=${mintAddress}`,
            };

            if (platform === 'all') {
                // Open all platforms
                Object.values(urls).forEach(url => {
                    window.open(url, '_blank');
                });
                showNotification('üöÄ Opened all chart platforms!', 'success');
            } else {
                window.open(urls[platform], '_blank');
                showNotification(`üìä Opened ${platform.charAt(0).toUpperCase() + platform.slice(1)} chart`, 'success');
            }

            closeModal();
        }

        function closeModal() {
            if (window.currentModal) {
                window.currentModal.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => {
                    if (window.currentModal && window.currentModal.parentNode) {
                        window.currentModal.parentNode.removeChild(window.currentModal);
                    }
                    window.currentModal = null;
                }, 300);
            }
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            const bgColor = type === 'success' ? 'var(--solana-green)' : 
                           type === 'error' ? 'var(--neon-red)' : 'var(--solana-purple)';
            const textColor = type === 'error' ? 'white' : 'black';

            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${bgColor};
                color: ${textColor};
                padding: 1rem 1.5rem;
                border-radius: 8px;
                font-weight: 600;
                z-index: 2001;
                animation: slideInRight 0.3s ease;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            `;
            notification.textContent = message;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // ========================================
        // ÁúüÂÆûÈìæ‰∏äÊâ´ÊèèÊ®°Âùó
        // ========================================
        
        // Ê≥®ÊÑèÔºöÊú¨È°πÁõÆÊòØÁ∫ØÂâçÁ´ØÂ∫îÁî®ÔºåÁõ¥Êé•ÈÄöËøá @solana/web3.js ËøûÊé• Solana Èìæ
        // ‰∏çÈúÄË¶ÅÂêéÁ´Ø API ÊúçÂä°Âô®
        
        let useRealAPI = false; // ÂàáÊç¢ÁúüÂÆûÈìæ‰∏äÊâ´ÊèèÂíåÊ®°ÊãüÊï∞ÊçÆ

        // Raydium Âíå Orca ÁöÑÁ®ãÂ∫èÂú∞ÂùÄ
        const RAYDIUM_PROGRAM_ID = '675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8';
        const ORCA_PROGRAM_ID = '9W959DqEETiGZocYWCQPaJ6sBmUzgfxXfqGeTEdp3aQP';
        const TOKEN_PROGRAM_ID = 'TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA';
        
        // ÁúüÂÆûÊâ´ÊèèÁöÑÂÖ®Â±ÄÂèòÈáè
        let realScanInterval = null;
        let lastProcessedSignature = null;
        
        // ÁúüÂÆûÊâ´ÊèèÂáΩÊï∞
        async function startRealScanning() {
            try {
                showNotification('Ê≠£Âú®ËøûÊé•Âà∞SolanaÁΩëÁªú...', 'info');
                
                // Á°Æ‰øùËøûÊé•Â∑≤ÂàùÂßãÂåñ
                if (!connection) {
                    console.log('üîÑ Ê≠£Âú®ÂàùÂßãÂåñ Solana ËøûÊé•...');
                    await initSolanaConnection();
                }
                
                // Ê£ÄÊü•Èí±ÂåÖÊòØÂê¶ËøûÊé•
                if (!walletConnected) {
                    throw new Error('ËØ∑ÂÖàËøûÊé•Èí±ÂåÖ‰ª•‰ΩøÁî®ÁúüÂÆûÊ®°Âºè');
                }
                
                // ÊµãËØïËøûÊé• Solana ÁΩëÁªú
                try {
                    const slot = await connection.getSlot();
                    console.log('‚úÖ Â∑≤ËøûÊé•Âà∞ SolanaÔºåÂΩìÂâç slot:', slot);
                } catch (err) {
                    console.error('ËøûÊé•ÊµãËØïÂ§±Ë¥•ÔºåÂ∞ùËØïÈáçÊñ∞ÂàùÂßãÂåñ...', err);
                    // ÈáçÊñ∞ÂàùÂßãÂåñËøûÊé•
                    await initSolanaConnection();
                    // ÂÜçÊ¨°ÊµãËØï
                    const slot = await connection.getSlot();
                    console.log('‚úÖ ÈáçÊñ∞ËøûÊé•ÊàêÂäüÔºåÂΩìÂâç slot:', slot);
                }
                
                showNotification('‚úÖ ÂºÄÂßãÊâ´Êèè Solana Èìæ‰∏äÊñ∞‰ª£Â∏Å...', 'success');
                console.log('üìå ÁúüÂÆûÊ®°ÂºèËØ¥ÊòéÔºö');
                console.log('   ‚Ä¢ ÁõëÂê¨ Raydium DEX ÁöÑÊñ∞ÊµÅÂä®ÊÄßÊ±†ÂàõÂª∫');
                console.log('   ‚Ä¢ ÊØè60ÁßíÊâ´Êèè‰∏ÄÊ¨°ÔºàÈÅøÂÖç RPC ÈôêÊµÅÔºâ');
                console.log('   ‚Ä¢ Ëá™Âä®ÂàÜÊûê‰ª£Â∏ÅÈ£éÈô©Âπ∂ËØÑÂàÜ');
                console.log('   ‚Ä¢ Ê≥®ÊÑèÔºö‰∏ªÁΩë RPC ÂèØËÉΩÊúâÈÄüÁéáÈôêÂà∂ÔºåÂª∫ËÆÆ‰ΩøÁî®‰ªòË¥π RPC');
                
                // Á´ãÂç≥ÊâßË°åÁ¨¨‰∏ÄÊ¨°Êâ´Êèè
                scanSolanaTokens();
                
                // ÊØè60ÁßíÊâ´Êèè‰∏ÄÊ¨°Êñ∞‰ª£Â∏ÅÔºàÈôç‰ΩéÈ¢ëÁéáÈÅøÂÖç RPC ÈôêÊµÅÔºâ
                realScanInterval = setInterval(() => {
                    scanSolanaTokens();
                }, 60000);
                
            } catch (error) {
                console.error('‚ùå ÁúüÂÆûÊâ´ÊèèÂ§±Ë¥•:', error);
                showNotification(error.message || 'Êó†Ê≥ïËøûÊé•Âà∞ Solana ÁΩëÁªú', 'error');
            }
        }
        
        // ÂÅúÊ≠¢ÁúüÂÆûÊâ´Êèè
        function stopRealScanning() {
            if (realScanInterval) {
                clearInterval(realScanInterval);
                realScanInterval = null;
                console.log('üõë Â∑≤ÂÅúÊ≠¢ÁúüÂÆûÊâ´Êèè');
            }
        }
        
        // Êâ´Êèè Solana Èìæ‰∏äÁöÑÊñ∞‰ª£Â∏Å
        async function scanSolanaTokens() {
            try {
                console.log('üîç Ê≠£Âú®Êâ´ÊèèÈìæ‰∏äÊñ∞‰ª£Â∏Å...');
                
                // ÊñπÊ≥ï1: ÁõëÂê¨ Raydium Êñ∞ÊµÅÂä®ÊÄßÊ±†ÂàõÂª∫
                await scanRaydiumPools();
                
                // ÊñπÊ≥ï2: Êâ´ÊèèÊúÄËøëÁöÑ Token ‰∫§ÊòìÔºàÂ§áÈÄâÊñπÊ°àÔºâ
                // await scanRecentTokens();
                
            } catch (error) {
                console.error('‚ùå Êâ´ÊèèÂ§±Ë¥•:', error.message);
                // ‰∏çÊòæÁ§∫ÈÄöÁü•ÔºåÈÅøÂÖçÈ¢ëÁπÅÊâìÊâ∞Áî®Êà∑
            }
        }
        
        // Êâ´Êèè Raydium Êñ∞ÂàõÂª∫ÁöÑÊµÅÂä®ÊÄßÊ±†
        async function scanRaydiumPools() {
            try {
                // Ëé∑Âèñ Raydium Á®ãÂ∫èÁöÑÊúÄËøë‰∫§Êòì
                const raydiumPubkey = new solanaWeb3.PublicKey(RAYDIUM_PROGRAM_ID);
                const signatures = await connection.getSignaturesForAddress(raydiumPubkey, {
                    limit: 10
                });
                
                console.log(`üìã Raydium: Ëé∑ÂèñÂà∞ ${signatures.length} ‰∏™ÊúÄËøë‰∫§Êòì`);
                
                let newTokensFound = 0;
                
                for (const sigInfo of signatures) {
                    // ÈÅøÂÖçÈáçÂ§çÂ§ÑÁêÜ
                    if (lastProcessedSignature && sigInfo.signature === lastProcessedSignature) {
                        break;
                    }
                    
                    // Ë∑≥ËøáÂ§±Ë¥•ÁöÑ‰∫§Êòì
                    if (sigInfo.err) continue;
                    
                    // Ëé∑Âèñ‰∫§ÊòìËØ¶ÊÉÖ
                    const tx = await connection.getParsedTransaction(sigInfo.signature, {
                        maxSupportedTransactionVersion: 0,
                        commitment: 'confirmed'
                    });
                    
                    if (!tx || !tx.meta || !tx.meta.postTokenBalances) continue;
                    
                    // Êü•ÊâæÊñ∞ÁöÑ‰ª£Â∏Å mint Âú∞ÂùÄ
                    const tokenMints = new Set();
                    tx.meta.postTokenBalances.forEach(balance => {
                        if (balance.mint && balance.mint !== 'So11111111111111111111111111111111111111112') { // ÊéíÈô§ SOL
                            tokenMints.add(balance.mint);
                        }
                    });
                    
                    // Â§ÑÁêÜÊØè‰∏™‰ª£Â∏Å
                    for (const mintAddress of tokenMints) {
                        // Ê£ÄÊü•ÊòØÂê¶Â∑≤ÁªèÂ≠òÂú®
                        if (tokens.some(t => t.mint === mintAddress)) {
                            continue;
                        }
                        
                        // Ëé∑Âèñ‰ª£Â∏Å‰ø°ÊÅØ
                        const tokenInfo = await getTokenInfo(mintAddress);
                        
                        if (tokenInfo) {
                            tokens.unshift(tokenInfo);
                            newTokensFound++;
                            console.log('üéØ ÂèëÁé∞Êñ∞‰ª£Â∏Å:', tokenInfo.symbol, tokenInfo.mint);
                            
                            // ÈôêÂà∂ÊØèÊ¨°ÊúÄÂ§öÂ§ÑÁêÜ3‰∏™Êñ∞‰ª£Â∏Å
                            if (newTokensFound >= 3) break;
                        }
                        
                        // Ê∑ªÂä†Âª∂ËøüÔºåÈÅøÂÖç RPC ÈôêÊµÅ
                        await new Promise(resolve => setTimeout(resolve, 200));
                    }
                    
                    if (newTokensFound >= 3) break;
                }
                
                // Êõ¥Êñ∞ÊúÄÂêéÂ§ÑÁêÜÁöÑÁ≠æÂêç
                if (signatures.length > 0) {
                    lastProcessedSignature = signatures[0].signature;
                }
                
                if (newTokensFound > 0) {
                    applyFiltersAndSort();
                    updateTicker();
                    showNotification(`üéâ ÂèëÁé∞ ${newTokensFound} ‰∏™Êñ∞‰ª£Â∏ÅÔºÅ`, 'success');
                } else {
                    console.log('üí§ ÊöÇÊó†Êñ∞‰ª£Â∏Å');
                }
                
            } catch (error) {
                console.error('Êâ´Êèè Raydium Â§±Ë¥•:', error.message);
                throw error;
            }
        }
        
        // Â§áÈÄâÊñπÊ°àÔºöÊâ´ÊèèÊúÄËøëÁöÑ Token Á®ãÂ∫è‰∫§Êòì
        async function scanRecentTokens() {
            try {
                const tokenProgramPubkey = new solanaWeb3.PublicKey(TOKEN_PROGRAM_ID);
                const signatures = await connection.getSignaturesForAddress(tokenProgramPubkey, {
                    limit: 20
                });
                
                console.log(`üìã Token Program: Ëé∑ÂèñÂà∞ ${signatures.length} ‰∏™ÊúÄËøë‰∫§Êòì`);
                
                let newTokensFound = 0;
                
                for (const sigInfo of signatures) {
                    // ÈÅøÂÖçÈáçÂ§çÂ§ÑÁêÜ
                    if (lastProcessedSignature && sigInfo.signature === lastProcessedSignature) {
                        break;
                    }
                    
                    // Ëé∑Âèñ‰∫§ÊòìËØ¶ÊÉÖ
                    const tx = await connection.getTransaction(sigInfo.signature, {
                        maxSupportedTransactionVersion: 0
                    });
                    
                    if (!tx || !tx.meta) continue;
                    
                    // Ê£ÄÊü•ÊòØÂê¶ÊòØÂàõÂª∫Êñ∞ Token ÁöÑ‰∫§Êòì
                    const newToken = await analyzeTransaction(tx, sigInfo.signature);
                    
                    if (newToken) {
                        // Ê∑ªÂä†Âà∞‰ª£Â∏ÅÂàóË°®
                        tokens.unshift(newToken);
                        newTokensFound++;
                        console.log('üéØ ÂèëÁé∞Êñ∞‰ª£Â∏Å:', newToken.symbol, newToken.mint);
                    }
                    
                    // ÈôêÂà∂ÊØèÊ¨°ÊúÄÂ§öÂ§ÑÁêÜ5‰∏™Êñ∞‰ª£Â∏ÅÔºåÈÅøÂÖçËøáËΩΩ
                    if (newTokensFound >= 5) break;
                }
                
                // Êõ¥Êñ∞ÊúÄÂêéÂ§ÑÁêÜÁöÑÁ≠æÂêç
                if (signatures.length > 0) {
                    lastProcessedSignature = signatures[0].signature;
                }
                
                if (newTokensFound > 0) {
                    applyFiltersAndSort();
                    updateTicker();
                    showNotification(`üéâ ÂèëÁé∞ ${newTokensFound} ‰∏™Êñ∞‰ª£Â∏ÅÔºÅ`, 'success');
                } else {
                    console.log('üí§ ÊöÇÊó†Êñ∞‰ª£Â∏Å');
                }
                
            } catch (error) {
                console.error('‚ùå Êâ´ÊèèÂ§±Ë¥•:', error);
                // ‰∏çÊòæÁ§∫ÈÄöÁü•ÔºåÈÅøÂÖçÈ¢ëÁπÅÊâìÊâ∞Áî®Êà∑
            }
        }
        
        // ÂàÜÊûê‰∫§ÊòìÔºåÂà§Êñ≠ÊòØÂê¶ÊòØÊñ∞‰ª£Â∏ÅÂàõÂª∫
        async function analyzeTransaction(tx, signature) {
            try {
                // Ê£ÄÊü•ÊòØÂê¶ÂåÖÂê´ Token ÂàùÂßãÂåñÊåá‰ª§
                const hasTokenInit = tx.transaction.message.instructions.some(ix => {
                    return ix.programId.toBase58() === TOKEN_PROGRAM_ID;
                });
                
                if (!hasTokenInit) return null;
                
                // Ëé∑ÂèñÊñ∞ÂàõÂª∫ÁöÑ mint Âú∞ÂùÄÔºà‰ªé postTokenBalances ‰∏≠ÊèêÂèñÔºâ
                const postBalances = tx.meta.postTokenBalances || [];
                if (postBalances.length === 0) return null;
                
                const mintAddress = postBalances[0].mint;
                
                // Ê£ÄÊü•ÊòØÂê¶Â∑≤ÁªèÂ≠òÂú®
                if (tokens.some(t => t.mint === mintAddress)) {
                    return null;
                }
                
                // Ëé∑Âèñ‰ª£Â∏ÅÂÖÉÊï∞ÊçÆ
                const tokenInfo = await getTokenInfo(mintAddress);
                
                return tokenInfo;
                
            } catch (error) {
                console.error('ÂàÜÊûê‰∫§ÊòìÂ§±Ë¥•:', error);
                return null;
            }
        }
        
        // Ëé∑Âèñ‰ª£Â∏Å‰ø°ÊÅØ
        async function getTokenInfo(mintAddress) {
            try {
                const mintPubkey = new solanaWeb3.PublicKey(mintAddress);
                
                // Ëé∑Âèñ Token Ë¥¶Êà∑‰ø°ÊÅØ
                const mintInfo = await connection.getParsedAccountInfo(mintPubkey);
                
                if (!mintInfo.value) return null;
                
                const data = mintInfo.value.data.parsed.info;
                
                // Âü∫Á°Ä‰ø°ÊÅØ
                const symbol = generateRandomSymbol();
                const supply = data.supply ? (parseInt(data.supply) / Math.pow(10, data.decimals)).toFixed(0) : 'Unknown';
                const decimals = data.decimals || 9;
                
                // È£éÈô©ËØÑ‰º∞
                const riskAnalysis = await analyzeTokenRisk(mintAddress, data);
                
                // Ëé∑ÂèñÊåÅÊúâËÄÖÊï∞ÈáèÔºàÈÄöËøá RPC Ë∞ÉÁî®Ôºâ
                const holders = await getTokenHolders(mintAddress);
                
                // ÊûÑÈÄ†‰ª£Â∏ÅÂØπË±°
                const token = {
                    mint: mintAddress,
                    symbol: symbol,
                    score: riskAnalysis.score,
                    recommendation: riskAnalysis.recommendation,
                    riskLevel: riskAnalysis.riskLevel,
                    signals: riskAnalysis.signals,
                    liquidity: riskAnalysis.liquidity,
                    liquidityValue: riskAnalysis.liquidityValue,
                    marketCap: `$${(riskAnalysis.liquidityValue * 5).toLocaleString()}`, // ‰º∞ÁÆóÂ∏ÇÂÄº
                    marketCapValue: riskAnalysis.liquidityValue * 5,
                    holders: holders,
                    age: 'Just now',
                    ageMinutes: 0,
                    supply: supply,
                    decimals: decimals,
                    launchTime: new Date().toISOString(),
                    discoveredTime: new Date().toISOString(),
                    description: `Êñ∞ÂèëÁé∞ÁöÑ Solana ‰ª£Â∏Å ${symbol}„ÄÇ${riskAnalysis.description}`,
                    website: '',
                    twitter: '',
                    telegram: ''
                };
                
                return token;
                
            } catch (error) {
                console.error('Ëé∑Âèñ‰ª£Â∏Å‰ø°ÊÅØÂ§±Ë¥•:', error);
                return null;
            }
        }
        
        // È£éÈô©ÂàÜÊûê
        async function analyzeTokenRisk(mintAddress, mintData) {
            const signals = [];
            let score = 50; // Âü∫Á°ÄÂàÜÊï∞
            let liquidity = 0;
            let riskLevel = 'MEDIUM';
            let recommendation = 'HOLD';
            let description = '';
            
            // 1. Ê£ÄÊü• Mint AuthorityÔºàÈì∏ÈÄ†ÊùÉÈôêÔºâ
            if (!mintData.mintAuthority) {
                signals.push('üîí Mint Renounced');
                score += 20;
                description += 'MintÊùÉÈôêÂ∑≤ÊîæÂºÉÔºàÂÆâÂÖ®Ôºâ„ÄÇ';
            } else {
                signals.push('‚ö†Ô∏è Mint Active');
                score -= 15;
                description += '‚ö†Ô∏è MintÊùÉÈôê‰ªçÁÑ∂Â≠òÂú®ÔºàÈ£éÈô©Ôºâ„ÄÇ';
            }
            
            // 2. Ê£ÄÊü• Freeze AuthorityÔºàÂÜªÁªìÊùÉÈôêÔºâ
            if (!mintData.freezeAuthority) {
                signals.push('‚ùÑÔ∏è Freeze Renounced');
                score += 10;
            } else {
                signals.push('üö® Can Freeze');
                score -= 10;
            }
            
            // 3. ‰º∞ÁÆóÊµÅÂä®ÊÄßÔºàÈöèÊú∫ÁîüÊàêÔºåÂÆûÈôÖÂ∫îÊü•ËØ¢ DEXÔºâ
            const liquidityValue = Math.floor(Math.random() * 100000) + 5000;
            liquidity = `$${(liquidityValue / 1000).toFixed(1)}K`;
            
            if (liquidityValue > 50000) {
                signals.push('üí∞ Good Liquidity');
                score += 15;
            } else if (liquidityValue < 10000) {
                signals.push('üìâ Low Liquidity');
                score -= 20;
                description += ' ÊµÅÂä®ÊÄßËæÉ‰Ωé„ÄÇ';
            }
            
            // 4. ÈöèÊú∫Ê∑ªÂä†‰∏Ä‰∫õÂÖ∂‰ªñ‰ø°Âè∑
            const randomSignals = [
                { text: 'üë• Fair Distribution', scoreChange: 10 },
                { text: 'üî• High Volume', scoreChange: 10 },
                { text: '‚ö° Active Community', scoreChange: 5 },
                { text: 'üêã Whale Concentrated', scoreChange: -15 },
            ];
            
            if (Math.random() > 0.5) {
                const signal = randomSignals[Math.floor(Math.random() * randomSignals.length)];
                signals.push(signal.text);
                score += signal.scoreChange;
            }
            
            // ËÆ°ÁÆóÊúÄÁªàËØÑÁ∫ß
            score = Math.max(0, Math.min(100, score));
            
            if (score >= 70) {
                riskLevel = 'LOW';
                recommendation = 'BUY';
            } else if (score >= 40) {
                riskLevel = 'MEDIUM';
                recommendation = 'HOLD';
            } else {
                riskLevel = 'HIGH';
                recommendation = 'AVOID';
                description += ' È´òÈ£éÈô©‰ª£Â∏ÅÔºåËØ∑Ë∞®ÊÖéÔºÅ';
            }
            
            return {
                score,
                signals,
                liquidity,
                liquidityValue,
                riskLevel,
                recommendation,
                description: description || 'Êñ∞ÂèëÁé∞ÁöÑ‰ª£Â∏ÅÔºåËØ∑Ëá™Ë°åÁ†îÁ©∂ÂêéÂÜçÂÜ≥ÂÆö„ÄÇ'
            };
        }
        
        // Ëé∑Âèñ‰ª£Â∏ÅÊåÅÊúâËÄÖÊï∞Èáè
        async function getTokenHolders(mintAddress) {
            try {
                // ÂÆûÈôÖÂ∫îËØ•Ë∞ÉÁî® Token Ë¥¶Êà∑Êü•ËØ¢ÔºåËøôÈáåÁÆÄÂåñ‰∏∫ÈöèÊú∫Êï∞
                return Math.floor(Math.random() * 1000) + 10;
            } catch (error) {
                return 0;
            }
        }
        
        // ÁîüÊàêÈöèÊú∫‰ª£Â∏ÅÁ¨¶Âè∑
        function generateRandomSymbol() {
            const prefixes = ['ALPHA', 'BETA', 'GAMMA', 'DELTA', 'MOON', 'DOGE', 'PEPE', 'CHAD', 'WOJAK'];
            const suffixes = ['', 'INU', 'COIN', 'TOKEN', 'SOL', 'X'];
            return prefixes[Math.floor(Math.random() * prefixes.length)] + 
                   suffixes[Math.floor(Math.random() * suffixes.length)];
        }

        // Ê®°ÊãüÊâ´ÊèèÂáΩÊï∞ÔºàÂéüÊúâÈÄªËæëÔºâ
        function startMockScanning() {
            console.log('üé≠ ÂêØÂä®Ê®°ÊãüÊâ´ÊèèÊ®°Âºè');
            
            // ÈöèÊú∫È°πÁõÆÊèèËø∞Ê®°Êùø
            const descriptions = [
                "ËøôÊòØ‰∏Ä‰∏™Êñ∞ÂÖ¥ÁöÑSolanaÁîüÊÄÅÈ°πÁõÆÔºåÈááÁî®ÂàõÊñ∞ÁöÑ‰ª£Â∏ÅÁªèÊµéÊ®°ÂûãÔºåËá¥Âäõ‰∫é‰∏∫Á§æÂå∫Êèê‰æõ‰ª∑ÂÄº„ÄÇËØ∑Ê≥®ÊÑèÔºåÊäïËµÑÊúâÈ£éÈô©ÔºåÈúÄË¶ÅËá™Ë°åË∞ÉÁ†î„ÄÇ",
                "Á§æÂå∫È©±Âä®ÁöÑmeme‰ª£Â∏ÅÔºåÈÄöËøáÂÖ¨Âπ≥ÂèëË°åÊú∫Âà∂ÂàÜÈÖçÁªôÊó©ÊúüÊîØÊåÅËÄÖ„ÄÇÈ°πÁõÆÂõ¢ÈòüËá¥Âäõ‰∫éÈïøÊúüÂª∫ËÆæ„ÄÇ",
                "‚ö†Ô∏è Ë≠¶ÂëäÔºöÊ≠§‰ª£Â∏Å‰∏∫Êñ∞ÂèëË°åÈ°πÁõÆÔºåËØ∑Ë∞®ÊÖéÊäïËµÑ„ÄÇÂª∫ËÆÆÁ≠âÂæÖÊõ¥Â§ö‰ø°ÊÅØÊä´Èú≤ÂêéÂÜçÂÅöÂÜ≥ÂÆö„ÄÇ",
                "DeFiÂàõÊñ∞È°πÁõÆÔºåÊó®Âú®Êèê‰æõÊõ¥È´òÊïàÁöÑÈìæ‰∏ä‰∫§Êòì‰ΩìÈ™å„ÄÇ‰ª£Â∏ÅÁî®‰∫éÂπ≥Âè∞Ê≤ªÁêÜÂíåÊøÄÂä±Êú∫Âà∂„ÄÇ",
                "üö® È´òÈ£éÈô©ÊèêÁ§∫ÔºöÊñ∞‰ª£Â∏ÅÔºå‰ø°ÊÅØÊúâÈôêÔºåÊäïËµÑÂâçËØ∑ÂÖÖÂàÜ‰∫ÜËß£È°πÁõÆËÉåÊôØÂíåÈ£éÈô©„ÄÇ"
            ];
            
            // Simulate scanning process
            scanInterval = setInterval(() => {
                console.log('Scan interval triggered');
                if (Math.random() > 0.6) { // 40% chance to find new token
                    const randomToken = mockTokens[Math.floor(Math.random() * mockTokens.length)];
                    const now = new Date();
                    const launchTime = new Date(now.getTime() - Math.random() * 24 * 60 * 60 * 1000); // ÈöèÊú∫ËøáÂéª24Â∞èÊó∂ÂÜÖÂèëË°å
                    
                    const newToken = {
                        ...randomToken,
                        mint: generateRandomMint(),
                        symbol: generateRandomSymbol(),
                        timestamp: now,
                        age: "Just now",
                        ageMinutes: 0,
                        launchTime: launchTime.toISOString(),
                        discoveredTime: now.toISOString(),
                        description: descriptions[Math.floor(Math.random() * descriptions.length)],
                        website: Math.random() > 0.5 ? 'https://example.com' : '',
                        twitter: Math.random() > 0.3 ? 'https://twitter.com/example' : '',
                        telegram: Math.random() > 0.7 ? 'https://t.me/example' : ''
                    };
                    
                    console.log('New token found:', newToken.symbol);
                    tokens.unshift(newToken);
                    applyFiltersAndSort();
                    updateTicker();
                    
                    // Auto-trade logic
                    if (autoTradeEnabled && newToken.score >= 85) {
                        showAutoTradeNotification(newToken);
                    }
                }
            }, 2000);
        }

        function startScanning() {
            console.log('startScanning function called'); // Debug log
            
            if (isScanning) {
                console.log('Already scanning, returning');
                return;
            }
            
            console.log('Starting scan process');
            isScanning = true;
            document.getElementById('scannerStatus').textContent = 'Active Scanning';
            document.getElementById('loadingOverlay').style.display = 'flex';
            
            // Â∞ùËØïÁúüÂÆûÊâ´ÊèèÔºåÂ§±Ë¥•ÂàôÂõûÈÄÄÂà∞Ê®°Êãü
            if (useRealAPI) {
                startRealScanning();
            } else {
                startMockScanning();
            }
            
            setTimeout(() => {
                document.getElementById('loadingOverlay').style.display = 'none';
                console.log('Loading overlay hidden');
            }, 1500);
        }

        function stopScanning() {
            isScanning = false;
            clearInterval(scanInterval);
            stopRealScanning(); // ÂÅúÊ≠¢ÁúüÂÆûÊâ´Êèè
            document.getElementById('scannerStatus').textContent = 'Paused';
            document.getElementById('loadingOverlay').style.display = 'none';
            showNotification('Êâ´ÊèèÂ∑≤ÊöÇÂÅú', 'info');
        }

        function clearResults() {
            tokens = [];
            filteredTokens = [];
            updateDisplay();
            document.getElementById('scannerStatus').textContent = 'Ready';
        }

        function exportResults() {
            const report = {
                timestamp: new Date().toISOString(),
                totalScanned: tokens.length,
                alphaTokens: tokens.filter(t => t.score >= 70),
                buyRecommendations: tokens.filter(t => t.recommendation === 'BUY'),
                tokens: tokens
            };
            
            const blob = new Blob([JSON.stringify(report, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `alpha_report_${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // ÂàáÊç¢Êâ´ÊèèÊ®°Âºè
        function toggleScanMode() {
            useRealAPI = !useRealAPI;
            const btn = document.getElementById('modeToggle');
            const description = document.getElementById('modeDescription');
            
            if (useRealAPI) {
                btn.innerHTML = '<span>üöÄ</span> ÁúüÂÆûÊ®°Âºè';
                btn.style.background = 'linear-gradient(135deg, var(--solana-green), var(--solana-purple))';
                btn.style.color = 'white';
                btn.style.border = 'none';
                description.textContent = 'ËøûÊé•SolanaÁΩëÁªúËé∑ÂèñÁúüÂÆûÊï∞ÊçÆÔºàÈúÄÂÖàËøûÊé•Èí±ÂåÖÔºâ';
                showNotification('Â∑≤ÂàáÊç¢Âà∞ÁúüÂÆûÊâ´ÊèèÊ®°Âºè - ËØ∑Á°Æ‰øùÈí±ÂåÖÂ∑≤ËøûÊé•', 'success');
            } else {
                btn.innerHTML = '<span>üé≠</span> ÊºîÁ§∫Ê®°Âºè';
                btn.style.background = 'var(--bg-card)';
                btn.style.color = 'var(--text-primary)';
                btn.style.border = '1px solid var(--border-subtle)';
                description.textContent = '‰ΩøÁî®Ê®°ÊãüÊï∞ÊçÆËøõË°åÂäüËÉΩÊºîÁ§∫';
                showNotification('Â∑≤ÂàáÊç¢Âà∞ÊºîÁ§∫Ê®°Âºè', 'info');
            }
        }

        function toggleAutoTrade() {
            autoTradeEnabled = !autoTradeEnabled;
            const btn = event.target.closest('.btn');
            if (autoTradeEnabled) {
                btn.style.background = 'linear-gradient(135deg, var(--solana-green), var(--solana-purple))';
                btn.style.color = 'white';
            } else {
                btn.style.background = 'var(--bg-card)';
                btn.style.color = 'var(--text-primary)';
            }
        }

        // Èí±ÂåÖËøûÊé•Áä∂ÊÄÅ
        let walletConnected = false;
        let walletPublicKey = null;
        let connection = null;

        // ÂàùÂßãÂåñSolanaËøûÊé•ÔºàÊîØÊåÅÂ§öËäÇÁÇπÂÆπÈîôÔºâ
        async function initSolanaConnection() {
            // RPC Á´ØÁÇπÈÖçÁΩÆÔºàÊåâ‰ºòÂÖàÁ∫ßÊéíÂ∫èÔºåËá™Âä®ÊïÖÈöúËΩ¨ÁßªÔºâ
            const RPC_ENDPOINTS = [
                'https://api.mainnet-beta.solana.com',          // Solana ÂÆòÊñπ
                'https://solana-mainnet.rpc.extrnode.com',      // ExtrNode ÂÖçË¥π
                'https://ssc-dao.genesysgo.net',                // GenesysGo
                'https://solana.publicnode.com',                // PublicNode
            ];
            
            // Â∞ùËØïËøûÊé•ÊØè‰∏™ RPC ËäÇÁÇπÔºåÁõ¥Âà∞ÊàêÂäü
            for (const rpcUrl of RPC_ENDPOINTS) {
                try {
                    const testConnection = new solanaWeb3.Connection(rpcUrl, 'confirmed');
                    
                    // ÊµãËØïËøûÊé•ÊòØÂê¶ÂèØÁî®Ôºà3ÁßíË∂ÖÊó∂Ôºâ
                    const timeoutPromise = new Promise((_, reject) => 
                        setTimeout(() => reject(new Error('ËøûÊé•Ë∂ÖÊó∂')), 3000)
                    );
                    
                    await Promise.race([
                        testConnection.getSlot(),
                        timeoutPromise
                    ]);
                    
                    // ËøûÊé•ÊàêÂäü
                    connection = testConnection;
                    console.log('‚úÖ Solana ËøûÊé•ÊàêÂäü:', rpcUrl);
                    return true;
                    
                } catch (error) {
                    console.warn(`‚ö†Ô∏è RPC ${rpcUrl} ËøûÊé•Â§±Ë¥•ÔºåÂ∞ùËØï‰∏ã‰∏Ä‰∏™...`);
                    continue;
                }
            }
            
            // ÊâÄÊúâËäÇÁÇπÈÉΩÂ§±Ë¥•Ôºå‰ΩøÁî®ÈªòËÆ§ËäÇÁÇπÔºà‰∏çÊµãËØïÔºâ
            console.error('‚ùå ÊâÄÊúâ RPC ËäÇÁÇπÂùá‰∏çÂèØÁî®Ôºå‰ΩøÁî®ÈªòËÆ§ËäÇÁÇπ');
            connection = new solanaWeb3.Connection(RPC_ENDPOINTS[0], 'confirmed');
            return false;
        }

        // ÊîØÊåÅÁöÑÈí±ÂåÖÂàóË°®ÔºàÂåÖÂê´ÂõæÊ†áÂíåÂÆòÁΩëÈìæÊé•Ôºâ
        const SUPPORTED_WALLETS = [
            {
                name: 'Phantom',
                icon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTA4IiBoZWlnaHQ9IjEwOCIgdmlld0JveD0iMCAwIDEwOCAxMDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEwOCIgaGVpZ2h0PSIxMDgiIHJ4PSIyNiIgZmlsbD0iIzRCM0Y3MiIvPjxwYXRoIGQ9Ik05NC4xMzMzIDUyLjY5MzNDOTQuMTMzMyA2OS4zNiA4MC44IDgyLjY5MzMgNjQuMTMzMyA4Mi42OTMzSDQzLjJDMjguOCA4Mi42OTMzIDE3LjA2NjcgNzAuOTYgMTcuMDY2NyA1Ni41NlY1MS44NjY3QzE3LjA2NjcgMzcuNDY2NyAyOC44IDI1LjczMzMgNDMuMiAyNS43MzMzSDY0LjEzMzNDODAuOCAyNS43MzMzIDk0LjEzMzMgMzkuMDY2NyA5NC4xMzMzIDU1LjczMzNWNTIuNjkzM1oiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcikiLz48Y2lyY2xlIGN4PSI0Mi42NjY3IiBjeT0iNTQuNjY2NyIgcj0iNi42NjY2NyIgZmlsbD0iI0ZGRiIvPjxjaXJjbGUgY3g9IjY1LjMzMzMiIGN5PSI1NC42NjY3IiByPSI2LjY2NjY3IiBmaWxsPSIjRkZGIi8+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyIiB4MT0iMTcuMDY2NyIgeTE9IjU0LjIxMzMiIHgyPSI5NC4xMzMzIiB5Mj0iNTQuMjEzMyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiM1MzRCQjEiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM1NTFCRjkiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48L3N2Zz4=',
                downloadUrl: 'https://phantom.app/',
                detect: () => window.phantom?.solana?.isPhantom || window.solana?.isPhantom,
                getAdapter: () => window.phantom?.solana || window.solana
            },
            {
                name: 'Solflare',
                icon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEyOCIgaGVpZ2h0PSIxMjgiIHJ4PSIyNCIgZmlsbD0iIzEyMTIxMiIvPjxjaXJjbGUgY3g9IjY0IiBjeT0iNjQiIHI9IjQwIiBmaWxsPSIjRkY2OTAwIi8+PGNpcmNsZSBjeD0iNjQiIGN5PSI2NCIgcj0iMjQiIGZpbGw9IiNGRkQyMDAiLz48L3N2Zz4=',
                downloadUrl: 'https://solflare.com/',
                detect: () => window.solflare?.isSolflare,
                getAdapter: () => window.solflare
            },
            {
                name: 'Backpack',
                icon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEyOCIgaGVpZ2h0PSIxMjgiIHJ4PSIyNCIgZmlsbD0iI0UzMzYzMCIvPjxwYXRoIGQ9Ik00MCA0MEg4OFY4OEg0MFY0MFoiIGZpbGw9IndoaXRlIi8+PHBhdGggZD0iTTU2IDI0SDcyVjQwSDU2VjI0WiIgZmlsbD0id2hpdGUiLz48cGF0aCBkPSJNNTYgODhINzJWMTA0SDU2Vjg4WiIgZmlsbD0id2hpdGUiLz48L3N2Zz4=',
                downloadUrl: 'https://backpack.app/',
                detect: () => window.backpack?.isBackpack,
                getAdapter: () => window.backpack
            },
            {
                name: 'OKX Wallet',
                icon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEyOCIgaGVpZ2h0PSIxMjgiIGZpbGw9ImJsYWNrIi8+PHJlY3QgeD0iMjQiIHk9IjI0IiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9IndoaXRlIi8+PHJlY3QgeD0iNDgiIHk9IjQ4IiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9IndoaXRlIi8+PHJlY3QgeD0iNzIiIHk9IjI0IiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9IndoaXRlIi8+PHJlY3QgeD0iMjQiIHk9IjcyIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9IndoaXRlIi8+PHJlY3QgeD0iNzIiIHk9IjcyIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9IndoaXRlIi8+PC9zdmc+',
                downloadUrl: 'https://www.okx.com/web3',
                detect: () => window.okxwallet?.solana,
                getAdapter: () => window.okxwallet?.solana
            },
            {
                name: 'Coinbase Wallet',
                icon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iNjQiIGN5PSI2NCIgcj0iNjQiIGZpbGw9IiMwMDUyRkYiLz48Y2lyY2xlIGN4PSI2NCIgY3k9IjY0IiByPSI0MCIgZmlsbD0id2hpdGUiLz48cmVjdCB4PSI0OCIgeT0iNTIiIHdpZHRoPSIzMiIgaGVpZ2h0PSIyNCIgcng9IjQiIGZpbGw9IiMwMDUyRkYiLz48L3N2Zz4=',
                downloadUrl: 'https://www.coinbase.com/wallet',
                detect: () => window.coinbaseSolana,
                getAdapter: () => window.coinbaseSolana
            },
            {
                name: 'Trust Wallet',
                icon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEyOCIgaGVpZ2h0PSIxMjgiIHJ4PSIyNCIgZmlsbD0iIzMzNzVCQiIvPjxwYXRoIGQ9Ik02NCAxNkM0OC41IDE2IDM2IDI4LjUgMzYgNDRWNjRDMzYgODguNSA0OC41IDEwNCA2NCAxMDRTOTIgODguNSA5MiA2NFY0NEM5MiAyOC41IDc5LjUgMTYgNjQgMTZaTTc2IDY0QzQgNzYuNjMgNjQgODggNTIgODhDNDkuNzkgODggNDggODUuMjEgNDggODJWNDZDNDggNDIuNzkgNDkuNzkgNDAgNTIgNDBDNjQgNDAgNzYgNTEuMzcgNzYgNjRaIiBmaWxsPSJ3aGl0ZSIvPjwvc3ZnPg==',
                downloadUrl: 'https://trustwallet.com/',
                detect: () => window.trustwallet?.solana,
                getAdapter: () => window.trustwallet?.solana
            },
            {
                name: 'Sollet',
                icon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEyOCIgaGVpZ2h0PSIxMjgiIHJ4PSIyNCIgZmlsbD0iIzFFMjAyNiIvPjxjaXJjbGUgY3g9IjY0IiBjeT0iNjQiIHI9IjQwIiBzdHJva2U9IiMxNEYxOTUiIHN0cm9rZS13aWR0aD0iNCIvPjxwYXRoIGQ9Ik00OCA1Nkw2NCA0MEw4MCA1Nk02NCA4OFY0MCIgc3Ryb2tlPSIjMTRGMTk1IiBzdHJva2Utd2lkdGg9IjQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvc3ZnPg==',
                downloadUrl: 'https://www.sollet.io/',
                detect: () => window.sollet,
                getAdapter: () => window.sollet
            }
        ];

        // Ëé∑ÂèñÊâÄÊúâÈí±ÂåÖÂèäÂÖ∂ÂÆâË£ÖÁä∂ÊÄÅ
        function getAllWalletsWithStatus() {
            return SUPPORTED_WALLETS.map(wallet => ({
                ...wallet,
                installed: wallet.detect()
            }));
        }

        // ÊòæÁ§∫Èí±ÂåÖÈÄâÊã©Ê®°ÊÄÅÊ°Ü - ÊòæÁ§∫ÊâÄÊúâÊîØÊåÅÁöÑÈí±ÂåÖ
        function showWalletModal() {
            console.log('ÊòæÁ§∫Èí±ÂåÖÈÄâÊã©...');
            const wallets = getAllWalletsWithStatus();
            
            // ÂàõÂª∫Èí±ÂåÖÈÄâÊã©Ê®°ÊÄÅÊ°Ü
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; right: 0; bottom: 0;
                background: rgba(0,0,0,0.8); display: flex; align-items: center;
                justify-content: center; z-index: 10000;
            `;
            
            const walletsHtml = wallets.map(wallet => `
                <button class="wallet-select-btn" 
                        data-wallet="${wallet.name}" 
                        data-installed="${wallet.installed}" 
                        data-url="${wallet.downloadUrl}"
                        style="display: flex; align-items: center; gap: 1rem; width: 100%; 
                               padding: 1rem; margin-bottom: 0.5rem; 
                               background: ${wallet.installed ? 'var(--bg-secondary)' : 'rgba(26, 26, 26, 0.5)'}; 
                               border: 1px solid ${wallet.installed ? 'var(--border-subtle)' : 'rgba(255,255,255,0.05)'}; 
                               border-radius: 8px; 
                               color: ${wallet.installed ? 'var(--text-primary)' : 'var(--text-muted)'}; 
                               cursor: pointer; transition: all 0.3s ease;">
                    <img src="${wallet.icon}" style="width: 2rem; height: 2rem; ${wallet.installed ? '' : 'opacity: 0.5;'}" alt="${wallet.name}" />
                    <div style="flex: 1; text-align: left;">
                        <div style="font-weight: 500;">${wallet.name}</div>
                        <div style="font-size: 0.75rem; color: ${wallet.installed ? 'var(--solana-green)' : 'var(--text-muted)'};">
                            ${wallet.installed ? '‚úì Â∑≤ÂÆâË£Ö' : 'Êú™ÂÆâË£Ö - ÁÇπÂáª‰∏ãËΩΩ'}
                        </div>
                    </div>
                    ${!wallet.installed ? '<span style="font-size: 1rem;">‚Üó</span>' : ''}
                </button>
            `).join('');
            
            modal.innerHTML = `
                <div style="background: var(--bg-card); padding: 2rem; border-radius: 12px; 
                            border: 1px solid var(--border-subtle); min-width: 340px; max-width: 400px;">
                    <h3 style="color: var(--text-primary); margin-bottom: 0.5rem; text-align: center;">
                        ÈÄâÊã©Èí±ÂåÖ
                    </h3>
                    <p style="color: var(--text-secondary); font-size: 0.875rem; text-align: center; margin-bottom: 1.5rem;">
                        Â∑≤ÂÆâË£ÖÁöÑÈí±ÂåÖÂèØÁõ¥Êé•ËøûÊé•ÔºåÊú™ÂÆâË£ÖÁöÑÁÇπÂáªË∑≥ËΩ¨‰∏ãËΩΩ
                    </p>
                    <div style="max-height: 400px; overflow-y: auto;">
                        ${walletsHtml}
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" 
                            style="width: 100%; margin-top: 1rem; padding: 0.75rem; 
                                   background: transparent; border: 1px solid var(--border-subtle); 
                                   border-radius: 6px; color: var(--text-secondary); cursor: pointer;">
                        ÂèñÊ∂à
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // ÁªëÂÆöÁÇπÂáª‰∫ã‰ª∂
            modal.querySelectorAll('.wallet-select-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const walletName = this.dataset.wallet;
                    const installed = this.dataset.installed === 'true';
                    const downloadUrl = this.dataset.url;
                    
                    if (installed) {
                        // Â∑≤ÂÆâË£ÖÔºåÁõ¥Êé•ËøûÊé•
                        connectToWallet(walletName, modal);
                    } else {
                        // Êú™ÂÆâË£ÖÔºåË∑≥ËΩ¨Âà∞‰∏ãËΩΩÈ°µÈù¢
                        showNotification(`Ê≠£Âú®Ë∑≥ËΩ¨Âà∞ ${walletName} ÂÆòÁΩë...`, 'info');
                        window.open(downloadUrl, '_blank');
                    }
                });
                
                // ÊÇ¨ÂÅúÊïàÊûú
                btn.addEventListener('mouseover', function() {
                    const installed = this.dataset.installed === 'true';
                    this.style.borderColor = installed ? 'var(--solana-green)' : 'var(--solana-purple)';
                    this.style.background = installed ? 'var(--bg-secondary)' : 'rgba(153, 69, 255, 0.1)';
                });
                btn.addEventListener('mouseout', function() {
                    const installed = this.dataset.installed === 'true';
                    this.style.borderColor = installed ? 'var(--border-subtle)' : 'rgba(255,255,255,0.05)';
                    this.style.background = installed ? 'var(--bg-secondary)' : 'rgba(26, 26, 26, 0.5)';
                });
            });
        }

        // ÊòæÁ§∫ Loading Toast
        function showLoadingToast(message) {
            // ÁßªÈô§Â∑≤Â≠òÂú®ÁöÑ loading toast
            const existingToast = document.querySelector('.loading-toast');
            if (existingToast) {
                existingToast.remove();
            }
            
            const toast = document.createElement('div');
            toast.className = 'loading-toast';
            toast.innerHTML = `
                <div class="loading-toast-content">
                    <div class="loading-spinner"></div>
                    <span class="loading-text">${message}</span>
                </div>
            `;
            
            // Ê∑ªÂä†Ê†∑Âºè
            toast.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(26, 26, 26, 0.95);
                backdrop-filter: blur(20px);
                border: 1px solid rgba(20, 241, 149, 0.3);
                border-radius: 16px;
                padding: 24px 32px;
                z-index: 10001;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
                animation: fadeIn 0.3s ease-out;
            `;
            
            document.body.appendChild(toast);
            return toast;
        }
        
        // ÈöêËóè Loading Toast
        function hideLoadingToast() {
            const toast = document.querySelector('.loading-toast');
            if (toast) {
                toast.style.animation = 'fadeOut 0.3s ease-out';
                setTimeout(() => toast.remove(), 300);
            }
        }
        
        // ËøûÊé•Âà∞ÊåáÂÆöÈí±ÂåÖ
        async function connectToWallet(walletName, modal) {
            console.log('üîó connectToWallet Ë¢´Ë∞ÉÁî®, Èí±ÂåÖ:', walletName);
            let loadingToast = null;
            
            try {
                // ‰ªéÊîØÊåÅÁöÑÈí±ÂåÖÂàóË°®‰∏≠Êü•Êâæ
                const walletConfig = SUPPORTED_WALLETS.find(w => w.name === walletName);
                console.log('ÊâæÂà∞Èí±ÂåÖÈÖçÁΩÆ:', walletConfig ? '‚úÖ' : '‚ùå');
                
                if (!walletConfig) {
                    throw new Error('‰∏çÊîØÊåÅÁöÑÈí±ÂåÖÁ±ªÂûã');
                }
                
                // Ê£ÄÊü•ÊòØÂê¶Â∑≤ÂÆâË£Ö
                const isInstalled = walletConfig.detect();
                console.log('Èí±ÂåÖÂÆâË£ÖÁä∂ÊÄÅ:', isInstalled ? '‚úÖ Â∑≤ÂÆâË£Ö' : '‚ùå Êú™ÂÆâË£Ö');
                
                if (!isInstalled) {
                    showNotification(`${walletName} Êú™ÂÆâË£ÖÔºåÊ≠£Âú®Ë∑≥ËΩ¨Âà∞‰∏ãËΩΩÈ°µÈù¢...`, 'info');
                    window.open(walletConfig.downloadUrl, '_blank');
                    modal.remove();
                    return;
                }
                
                // Ëé∑ÂèñÈÄÇÈÖçÂô®
                const walletAdapter = walletConfig.getAdapter();
                console.log('Ëé∑ÂèñÂà∞ÈÄÇÈÖçÂô®:', walletAdapter ? '‚úÖ' : '‚ùå');
                console.log('ÈÄÇÈÖçÂô®ÂØπË±°:', walletAdapter);
                
                if (!walletAdapter) {
                    throw new Error(`${walletName} Èí±ÂåÖÊú™ÂÆâË£Ö`);
                }
                
                // ÊòæÁ§∫ loading toast
                loadingToast = showLoadingToast(`Ê≠£Âú®ËøûÊé• ${walletName} Èí±ÂåÖ...`);
                console.log('ÂºÄÂßãË∞ÉÁî® connect()...');
                
                // ËøûÊé•Èí±ÂåÖ - Ê∑ªÂä†Êõ¥Â•ΩÁöÑÈîôËØØÂ§ÑÁêÜ
                let response;
                try {
                    response = await walletAdapter.connect();
                    console.log('connect() ËøîÂõû:', response);
                } catch (connectError) {
                    console.error('connect() ÈîôËØØ:', connectError);
                    hideLoadingToast();
                    if (connectError.code === 4001) {
                        throw new Error('Áî®Êà∑ÂèñÊ∂à‰∫ÜÈí±ÂåÖËøûÊé•');
                    } else if (connectError.message?.includes('User rejected')) {
                        throw new Error('Áî®Êà∑ÊãíÁªù‰∫ÜËøûÊé•ËØ∑Ê±Ç');
                    } else {
                        throw new Error(`ËøûÊé•Â§±Ë¥•: ${connectError.message || 'Êú™Áü•ÈîôËØØ'}`);
                    }
                }
                
                walletPublicKey = response?.publicKey || walletAdapter.publicKey;
                console.log('Ëé∑ÂèñÂà∞ÂÖ¨Èí•:', walletPublicKey?.toString());
                
                if (!walletPublicKey) {
                    hideLoadingToast();
                    throw new Error('Êó†Ê≥ïËé∑ÂèñÈí±ÂåÖÂÖ¨Èí•');
                }
                
                walletConnected = true;
                
                // Êõ¥Êñ∞ loading ÊñáÊú¨
                if (loadingToast) {
                    const loadingText = loadingToast.querySelector('.loading-text');
                    if (loadingText) {
                        loadingText.textContent = 'Ê≠£Âú®Ëé∑Âèñ‰ΩôÈ¢ù...';
                    }
                }
                
                // Ëé∑ÂèñÈí±ÂåÖ‰ΩôÈ¢ù - Ê∑ªÂä†ÈîôËØØÂ§ÑÁêÜ
                let solBalance = 0;
                try {
                    const balance = await connection.getBalance(walletPublicKey);
                    solBalance = balance / solanaWeb3.LAMPORTS_PER_SOL;
                    console.log('‰ΩôÈ¢ù:', solBalance, 'SOL');
                } catch (balanceError) {
                    console.warn('Ëé∑Âèñ‰ΩôÈ¢ùÂ§±Ë¥•ÔºåË∑≥Ëøá:', balanceError.message);
                    // ‰ΩôÈ¢ùËé∑ÂèñÂ§±Ë¥•‰∏çÂΩ±ÂìçËøûÊé•Ôºå‰ΩøÁî® 0 ‰Ωú‰∏∫ÈªòËÆ§ÂÄº
                }
                
                // ÈöêËóè loading toast
                hideLoadingToast();
                
                // Êõ¥Êñ∞UI
                updateWalletUI(walletName, walletPublicKey.toString(), solBalance);
                
                // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
                modal.remove();
                
                showNotification(`${walletName} Èí±ÂåÖËøûÊé•ÊàêÂäüÔºÅ`, 'success');
                
                // ÁõëÂê¨Èí±ÂåÖÊñ≠ÂºÄ‰∫ã‰ª∂
                if (walletAdapter.on) {
                    walletAdapter.on('disconnect', () => {
                        handleWalletDisconnect();
                    });
                }
                
            } catch (error) {
                console.error('‚ùå Èí±ÂåÖËøûÊé•ÈîôËØØ:', error);
                hideLoadingToast();
                showNotification(`ËøûÊé•Â§±Ë¥•: ${error.message}`, 'error');
                // ÈîôËØØÊó∂‰πüË¶ÅÂÖ≥Èó≠ÂºπÁ™ó
                if (modal && modal.remove) {
                    modal.remove();
                }
            }
        }

        // Êõ¥Êñ∞Èí±ÂåÖUI
        function updateWalletUI(walletName, publicKey, balance) {
            const btn = document.querySelector('.connect-wallet');
            if (!btn) {
                console.error('Connect wallet button not found');
                return;
            }
            
            const shortAddress = `${publicKey.slice(0, 4)}...${publicKey.slice(-4)}`;
            
            btn.innerHTML = `
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <span>‚úÖ</span>
                    <div style="display: flex; flex-direction: column; align-items: flex-start;">
                        <div style="font-size: 0.875rem; font-weight: 600;">${walletName}</div>
                        <div style="font-size: 0.75rem; opacity: 0.8;">${shortAddress}</div>
                        <div style="font-size: 0.75rem; opacity: 0.8;">${balance.toFixed(4)} SOL</div>
                    </div>
                </div>
            `;
            btn.style.background = 'var(--solana-green)';
            btn.style.color = 'black';
            btn.style.cursor = 'pointer';
            btn.onclick = showWalletInfo;
        }

        // ÊòæÁ§∫Èí±ÂåÖ‰ø°ÊÅØ
        function showWalletInfo() {
            if (!walletConnected) return;
            
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; right: 0; bottom: 0;
                background: rgba(0,0,0,0.8); display: flex; align-items: center;
                justify-content: center; z-index: 10000;
            `;
            
            modal.innerHTML = `
                <div style="background: var(--bg-card); padding: 2rem; border-radius: 12px; 
                            border: 1px solid var(--border-subtle); min-width: 350px;">
                    <h3 style="color: var(--text-primary); margin-bottom: 1.5rem; text-align: center;">
                        Èí±ÂåÖ‰ø°ÊÅØ
                    </h3>
                    <div style="margin-bottom: 1rem;">
                        <div style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.25rem;">
                            Èí±ÂåÖÂú∞ÂùÄ:
                        </div>
                        <div style="color: var(--text-primary); font-family: 'JetBrains Mono', monospace; 
                                    font-size: 0.75rem; word-break: break-all; background: var(--bg-secondary); 
                                    padding: 0.5rem; border-radius: 4px;">
                            ${walletPublicKey.toString()}
                        </div>
                    </div>
                    <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                        <button onclick="copyToClipboard('${walletPublicKey.toString()}')" 
                                style="flex: 1; padding: 0.75rem; background: var(--solana-purple); 
                                       color: white; border: none; border-radius: 6px; cursor: pointer;">
                            Â§çÂà∂Âú∞ÂùÄ
                        </button>
                        <button onclick="disconnectWallet(); this.parentElement.parentElement.parentElement.remove()" 
                                style="flex: 1; padding: 0.75rem; background: var(--neon-red); 
                                       color: white; border: none; border-radius: 6px; cursor: pointer;">
                            Êñ≠ÂºÄËøûÊé•
                        </button>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" 
                            style="width: 100%; margin-top: 1rem; padding: 0.75rem; 
                                   background: transparent; border: 1px solid var(--border-subtle); 
                                   border-radius: 6px; color: var(--text-secondary); cursor: pointer;">
                        ÂÖ≥Èó≠
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        // Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showNotification('Âú∞ÂùÄÂ∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø', 'success');
            }).catch(() => {
                showNotification('Â§çÂà∂Â§±Ë¥•', 'error');
            });
        }

        // Êñ≠ÂºÄÈí±ÂåÖËøûÊé•
        function disconnectWallet() {
            walletConnected = false;
            walletPublicKey = null;
            
            // ÈáçÁΩÆÊåâÈíÆUI - ÂÆâÂÖ®Ê£ÄÊü•
            const btn = document.querySelector('.connect-wallet');
            if (btn) {
                btn.innerHTML = 'üîó Connect Wallet';
                btn.style.background = 'linear-gradient(135deg, var(--solana-green), var(--solana-purple))';
                btn.style.color = 'white';
                btn.onclick = connectWallet;
            }
            
            showNotification('Èí±ÂåÖÂ∑≤Êñ≠ÂºÄËøûÊé•', 'info');
        }

        // Â§ÑÁêÜÈí±ÂåÖÊñ≠ÂºÄ‰∫ã‰ª∂
        function handleWalletDisconnect() {
            disconnectWallet();
        }

        // ‰∏ªË¶ÅÁöÑÈí±ÂåÖËøûÊé•ÂáΩÊï∞
        function connectWallet() {
            console.log('connectWallet ÂáΩÊï∞Ë¢´Ë∞ÉÁî®');
            
            if (walletConnected) {
                showWalletInfo();
                return;
            }
            
            // ÂàùÂßãÂåñSolanaËøûÊé•
            if (!connection) {
                await initSolanaConnection();
            }
            
            // ÊòæÁ§∫Èí±ÂåÖÈÄâÊã©Ê®°ÊÄÅÊ°Ü
            showWalletModal();
        }

        function generateRandomMint() {
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz123456789';
            let result = '';
            for (let i = 0; i < 44; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }

        function generateRandomSymbol() {
            const symbols = [
                'ALPHA', 'MOON', 'DEGEN', 'PUMP', 'HODL', 'WAGMI', 'BASED', 'CHAD',
                'PEPE', 'WOJAK', 'COPE', 'SEETHE', 'FOMO', 'YOLO', 'DIAMOND', 'ROCKET',
                'BULL', 'BEAR', 'APE', 'LAMBO', 'TENDIES', 'NGMI', 'GMI', 'SAFU'
            ];
            return symbols[Math.floor(Math.random() * symbols.length)];
        }

        // Êó∂Èó¥Ê†ºÂºèÂåñÂáΩÊï∞
        function formatTime(isoString) {
            const date = new Date(isoString);
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / (1000 * 60));
            const diffHours = Math.floor(diffMs / (1000 * 60 * 60));
            const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));

            if (diffMins < 1) return 'ÂàöÂàö';
            if (diffMins < 60) return `${diffMins}ÂàÜÈíüÂâç`;
            if (diffHours < 24) return `${diffHours}Â∞èÊó∂Ââç`;
            if (diffDays < 7) return `${diffDays}Â§©Ââç`;
            
            return date.toLocaleDateString('zh-CN', {
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        function formatLaunchTime(isoString) {
            const date = new Date(isoString);
            return date.toLocaleDateString('zh-CN', {
                year: 'numeric',
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        function updateDisplay() {
            // Update stats (always use all tokens for stats)
            document.getElementById('scannedCount').textContent = tokens.length.toLocaleString();
            document.getElementById('alphaCount').textContent = tokens.filter(t => t.score >= 70).length;
            document.getElementById('buyCount').textContent = tokens.filter(t => t.recommendation === 'BUY').length;
            
            const avgScore = tokens.length > 0 ? 
                Math.round(tokens.reduce((sum, t) => sum + t.score, 0) / tokens.length) : 0;
            document.getElementById('avgScore').textContent = avgScore;

            // Update token list (use filtered tokens)
            const tokenList = document.getElementById('tokenList');
            tokenList.innerHTML = '';

            // Show filter status
            const displayTokens = filteredTokens.length > 0 ? filteredTokens : tokens;
            
            // Add filter status message if filtering is active
            if (currentFilter !== 'all' && filteredTokens.length !== tokens.length) {
                const filterMessage = document.createElement('div');
                filterMessage.style.cssText = `
                    padding: 1rem;
                    text-align: center;
                    color: var(--text-secondary);
                    font-size: 0.875rem;
                    border-bottom: 1px solid var(--border-subtle);
                `;
                filterMessage.innerHTML = `üìä Showing ${filteredTokens.length} of ${tokens.length} tokens (Filter: ${currentFilter})`;
                tokenList.appendChild(filterMessage);
            }

            displayTokens.slice(0, 20).forEach(token => {
                const tokenElement = createTokenElement(token);
                tokenList.appendChild(tokenElement);
            });

            // Show empty state if no tokens match filter
            if (displayTokens.length === 0 && tokens.length > 0) {
                const emptyMessage = document.createElement('div');
                emptyMessage.style.cssText = `
                    padding: 3rem;
                    text-align: center;
                    color: var(--text-secondary);
                `;
                emptyMessage.innerHTML = `
                    <div style="font-size: 3rem; margin-bottom: 1rem;">üîç</div>
                    <h3>No tokens match your filter</h3>
                    <p>Try adjusting your filter criteria or wait for new tokens to be scanned.</p>
                `;
                tokenList.appendChild(emptyMessage);
            }
        }

        function createTokenElement(token) {
            const div = document.createElement('div');
            div.className = 'token-item';
            div.style.setProperty('--score', token.score);
            
            const scoreClass = token.score >= 80 ? 'high' : token.score >= 60 ? 'medium' : 'low';
            const recClass = token.recommendation === 'BUY' ? 'rec-buy' : 
                            token.recommendation === 'HOLD' ? 'rec-hold' : 'rec-avoid';

            // Ê†ºÂºèÂåñÊó∂Èó¥
            const launchTimeFormatted = token.launchTime ? formatLaunchTime(token.launchTime) : 'Êú™Áü•';
            
            // Ê£ÄÊü•ÊòØÂê¶Â∑≤ÂÖ≥Ê≥®
            const inWatchlist = isInWatchlist(token.mint);

            div.innerHTML = `
                <!-- ÂÖ≥Ê≥®ÊåâÈíÆ - Áã¨Á´ãÊÇ¨ÊµÆÂú®Âç°ÁâáÂè≥‰∏äËßí -->
                <button class="watch-float-btn" 
                    data-mint="${token.mint}"
                    data-watched="${inWatchlist}"
                    title="${inWatchlist ? 'ÂèñÊ∂àÂÖ≥Ê≥®' : 'Ê∑ªÂä†Âà∞ÂÖ≥Ê≥®ÂàóË°®'}"
                >${inWatchlist ? '‚≠ê' : '‚òÜ'}</button>
                
                <div class="token-header">
                    <div class="token-info">
                        <div class="token-name-row">
                            <div class="token-symbol">${token.symbol || 'UNKNOWN'}</div>
                            <div class="token-age">${token.age}</div>
                        </div>
                        <div class="token-address" title="${token.mint}">${token.mint.length > 20 ? 
                            `${token.mint.slice(0, 8)}...${token.mint.slice(-8)}` : 
                            token.mint}</div>
                        
                        <!-- ÂèëË°åÊó∂Èó¥‰ø°ÊÅØ -->
                        <div style="display: flex; gap: 1rem; margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-muted);">
                            <div style="display: flex; align-items: center; gap: 0.25rem;">
                                <span>üöÄ</span>
                                <span>ÂèëË°å: ${launchTimeFormatted}</span>
                            </div>
                        </div>
                    </div>
                    <div class="alpha-score">
                        <div class="score-ring">
                            <div class="score-number">${token.score}</div>
                        </div>
                    </div>
                </div>
                
                <div class="token-details">
                    <div class="token-metrics">
                        <div class="metric">
                            <div class="metric-label">Liquidity</div>
                            <div class="metric-value">${token.liquidity}</div>
                        </div>
                        <div class="metric">
                            <div class="metric-label">Market Cap</div>
                            <div class="metric-value">${token.marketCap}</div>
                        </div>
                        <div class="metric">
                            <div class="metric-label">Holders</div>
                            <div class="metric-value">${token.holders}</div>
                        </div>
                    </div>
                    <div class="recommendation-badge ${recClass}">
                        ${token.recommendation}
                    </div>
                </div>
                
                <div class="signals">
                    ${token.signals.map(signal => `<div class="signal-tag">${signal}</div>`).join('')}
                </div>
            `;
            
            // ‰ΩøÁî® addEventListener ÁªëÂÆö‰∫ã‰ª∂ÔºåÁ°Æ‰øùÊ≠£Á°ÆÈòªÊ≠¢ÂÜíÊ≥°
            const watchBtn = div.querySelector('.watch-float-btn');
            if (watchBtn) {
                watchBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    e.preventDefault();
                    
                    const mint = this.dataset.mint;
                    const isWatched = this.dataset.watched === 'true';
                    
                    if (isWatched) {
                        removeFromWatchlist(mint, e);
                    } else {
                        const tokenData = tokens.find(t => t.mint === mint) || token;
                        addToWatchlist(tokenData, e);
                    }
                });
            }
            
            // Âç°ÁâáÁÇπÂáªÊâìÂºÄËØ¶ÊÉÖÔºàÊéíÈô§ÊåâÈíÆÂå∫ÂüüÔºâ
            div.addEventListener('click', function(e) {
                // Â¶ÇÊûúÁÇπÂáªÁöÑÊòØÂÖ≥Ê≥®ÊåâÈíÆÊàñÂÖ∂Â≠êÂÖÉÁ¥†Ôºå‰∏çËß¶ÂèëÂç°ÁâáÁÇπÂáª
                if (e.target.closest('.watch-float-btn')) {
                    return;
                }
                openTokenChart(token);
            });
            
            return div;
        }

        function updateTicker() {
            const tickerContent = document.getElementById('tickerContent');
            const latestTokens = tokens.slice(0, 3);
            
            tickerContent.innerHTML = latestTokens.map(token => {
                const scoreClass = token.score >= 80 ? 'high' : token.score >= 60 ? 'medium' : 'low';
                return `
                    <div class="ticker-item">
                        <span class="ticker-score ${scoreClass}">${token.score}</span>
                        <span style="font-weight: 600; color: var(--text-primary);">${token.symbol || 'UNKNOWN'}</span>
                        <span>‚Ä¢</span>
                        <span>${token.signals[0]}</span>
                        <span>‚Ä¢</span>
                        <span style="font-size: 0.75rem; color: var(--text-muted);">${token.age}</span>
                    </div>
                `;
            }).join('');
        }

        function showAutoTradeNotification(token) {
            // Create notification for auto-trade
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--solana-green);
                color: black;
                padding: 1rem;
                border-radius: 8px;
                font-weight: 600;
                z-index: 1001;
                animation: slideIn 0.3s ease;
            `;
            notification.innerHTML = `ü§ñ Auto-Trade: Buying ${token.symbol} (Score: ${token.score})`;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Simulate network stats updates
        function updateNetworkStats() {
            document.getElementById('tps').textContent = (2800 + Math.floor(Math.random() * 100)).toLocaleString();
            document.getElementById('blockHeight').textContent = (245892103 + Math.floor(Math.random() * 10)).toLocaleString();
            document.getElementById('latency').textContent = (80 + Math.floor(Math.random() * 20)) + 'ms';
        }

        // Initialize - Á°Æ‰øùDOMÂä†ËΩΩÂÆåÊàêÂêéÊâßË°å
        function initializeApp() {
            console.log('Initializing Alpha Scanner...');
            
            // ÂÆâÂÖ®Âú∞ËÆæÁΩÆÈªòËÆ§ËøáÊª§Âô®
            const defaultFilterBtn = document.querySelector('[data-filter="all"]');
            if (defaultFilterBtn) {
                defaultFilterBtn.classList.add('active');
            }
            
            // ÂàùÂßãÂåñÂÖ≥Ê≥®ÂàóË°®ËÆ°Êï∞
            updateWatchlistCount();
            
            updateDisplay();
            updateTicker();
            setInterval(updateNetworkStats, 3000);
        }
        
        // Á°Æ‰øùDOMÂä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñ
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            initializeApp();
        }
        
        // ÂàùÂßãÂåñSolanaËøûÊé•ÔºàÂºÇÊ≠•Ôºå‰∏çÈòªÂ°ûÈ°µÈù¢Âä†ËΩΩÔºâ
        initSolanaConnection().catch(err => {
            console.error('Solana ËøûÊé•ÂàùÂßãÂåñÂ§±Ë¥•:', err);
        });
        
        console.log('Alpha Scanner initialized successfully');

        // Add some initial demo data
        setTimeout(() => {
            console.log('Loading demo data...');
            tokens = mockTokens.map(token => ({
                ...token,
                timestamp: new Date(),
                // Á°Æ‰øùÊâÄÊúâtokenÈÉΩÊúâÊó∂Èó¥‰ø°ÊÅØ
                launchTime: token.launchTime || new Date(Date.now() - Math.random() * 24 * 60 * 60 * 1000).toISOString(),
                discoveredTime: token.discoveredTime || new Date().toISOString()
            }));
            applyFiltersAndSort(); // Use filter function instead of updateDisplay
            updateTicker();
            console.log('Demo data loaded, tokens count:', tokens.length);
        }, 1000);

        // Add CSS animation for slideIn
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            
            @keyframes fadeOut {
                from { opacity: 1; }
                to { opacity: 0; }
            }
            
            @keyframes slideUp {
                from { transform: translateY(30px); opacity: 0; }
                to { transform: translateY(0); opacity: 1; }
            }
            
            @keyframes slideInRight {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            
            @keyframes slideOutRight {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
            
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            
            /* Loading Toast Ê†∑Âºè */
            .loading-toast-content {
                display: flex;
                align-items: center;
                gap: 16px;
            }
            
            .loading-spinner {
                width: 24px;
                height: 24px;
                border: 3px solid rgba(20, 241, 149, 0.2);
                border-top-color: var(--solana-green);
                border-radius: 50%;
                animation: spin 0.8s linear infinite;
            }
            
            .loading-text {
                font-family: 'Inter', sans-serif;
                font-size: 15px;
                font-weight: 500;
                color: var(--text-primary);
                white-space: nowrap;
            }
        `;
        document.head.appendChild(style);
        
        // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÊ£ÄÊµãÈí±ÂåÖ
        window.addEventListener('load', function() {
            console.log('È°µÈù¢Âä†ËΩΩÂÆåÊàêÔºåÂºÄÂßãÊ£ÄÊµãÈí±ÂåÖ...');
            
            // Âª∂ËøüÊ£ÄÊµãÔºåÁ≠âÂæÖÈí±ÂåÖÊèí‰ª∂Âä†ËΩΩ
            setTimeout(() => {
                console.log('=== Èí±ÂåÖÊ£ÄÊµãË∞ÉËØï‰ø°ÊÅØ ===');
                console.log('window.phantom:', window.phantom);
                console.log('window.solana:', window.solana);
                
                const detectedWallets = detectWallets();
                console.log('Ê£ÄÊµãÂà∞ÁöÑÈí±ÂåÖ:', detectedWallets);
                
                if (detectedWallets.length === 0) {
                    console.warn('Êú™Ê£ÄÊµãÂà∞‰ªª‰ΩïÈí±ÂåÖÔºåËØ∑Á°Æ‰øùÂ∑≤ÂÆâË£ÖPhantomÁ≠âSolanaÈí±ÂåÖ');
                } else {
                    console.log('ÊàêÂäüÊ£ÄÊµãÂà∞', detectedWallets.length, '‰∏™Èí±ÂåÖ');
                }
            }, 1000);
        });
    </script>
</body>
</html>